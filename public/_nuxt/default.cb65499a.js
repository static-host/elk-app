import{ap as Ke,o as u,c as d,bP as Kt,bQ as Nt,j as a,d as H,cp as lt,aw as Ne,x as E,aU as pe,f as p,w as $,a8 as Q,l as L,t as f,h as r,bn as Rt,y as Y,aG as ot,a3 as z,p as de,a4 as Re,aJ as Dn,a_ as Mn,bY as Tn,J as zt,a as W,q as te,m as R,aq as me,S as it,k as D,cA as Bt,cB as En,bf as Ue,bv as In,cC as mt,a6 as ze,ac as Wt,cD as Pn,L as A,M as X,cw as Ft,i as jt,cE as An,ae as Vn,ai as Gn,cF as Un,aA as Yt,bq as qt,al as Xt,F as ct,bw as Hn,cG as Ln,ct as Zt,an as Qt,c6 as Jt,c5 as be,aa as O,aN as On,be as Kn,z as Nn,bt as pt,cH as Rn,a9 as ut,ax as Ee,cr as zn,aL as Bn,aI as en,ck as Wn,az as vt,cI as Fn,cJ as jn,cK as ge,cL as gt,cM as Yn,cN as _t,u as qn,cO as Be,cP as Xn,cQ as Zn,cR as Qn,B as tn,C as Jn,b as nn,cS as es,N as ts,cj as Ie,b$ as Ye,Y as qe,Z as ns,R as he,cT as ss,W as os,X as is,cU as yt,cV as Xe,cW as as,cX as Ze,cY as bt,cZ as Pe,c_ as kt,c$ as wt,d0 as $t,d1 as Qe,d2 as rs,d3 as Je,d4 as xt,aF as St,d5 as Ae,d6 as Ct,au as ls,d7 as et,d8 as Ve,d9 as cs,da as tt,db as Dt,dc as us,dd as ds,de as nt,b6 as Mt,df as hs,s as fs,dg as ms,aT as sn,b_ as ps,dh as vs,bp as gs,_ as _s}from"./entry.6470c283.js";import{i as ys}from"./screen.c74cb8ad.js";import{u as on}from"./notification.318359a8.js";import{u as bs,a as ks,b as ws,_ as $s}from"./SearchWidget.vue.c04ef304.js";import{_ as xs}from"./ModalDialog.7f5b2796.js";import{_ as Ss}from"./PublishWidget.99c41a95.js";import{_ as Cs}from"./AccountInlineInfo.vue.1d2999da.js";import{f as Ds,g as Ms,j as Ts,e as Es}from"./StatusCard.vue.1da0e372.js";import{_ as Is}from"./AccountPaginator.vue.ef09dab4.js";import"./SearchHashtagInfo.vue.6773582e.js";import"./CommonTrendingCharts.vue.860ab26d.js";import"./CommonErrorMessage.vue.8ac3d45b.js";import"./StatusAttachment.vue.65a4200d.js";import"./CommonBlurhash.vue.63c08ee4.js";import"./CommonCheckbox.vue.87c89bd7.js";import"./Dropdown.vue.aa86e3bf.js";import"./index.modern.9fe7b5ad.js";import"./web-share-target.81d4b600.js";import"./CommonPaginator.vue.26cfe48c.js";import"./StatusPreviewCard.vue.01b2746b.js";import"./AccountCard.vue.4086cce4.js";const Ps={},As=n=>(Kt("data-v-5cb58bfe"),n=n(),Nt(),n),Vs={"shrink-0":"",aspect:"1/1","sm:h-8":"","xl:h-10":"",class:"rtl-flip"},Gs=As(()=>a("svg",{xmlns:"http://www.w3.org/2000/svg","w-full":"",aspect:"1/1","sm:h-8":"","xl:h-10":"","sm:w-8":"","xl:w-10":"",viewBox:"0 0 250 250",fill:"none"},[a("mask",{id:"a",width:"240",height:"234",x:"4",y:"1",maskUnits:"userSpaceOnUse",style:{"mask-type":"alpha"}},[a("path",{id:"path19",fill:"#D9D9D9",d:"M244 123c0 64.617-38.383 112-103 112-64.617 0-103-30.883-103-95.5C38 111.194-8.729 36.236 8 16 29.46-9.959 88.689 6 125 6c64.617 0 119 52.383 119 117Z"})]),a("g",{id:"g28",mask:"url(#a)",transform:"matrix(0.90923731,0,0,1.0049564,13.520015,-3.1040835)"},[a("path",{id:"path22",class:"body",d:"m 116.94,88.1 c -13.344,1.552 -20.436,-2.019 -24.706,10.71 0,0 14.336,21.655 52.54,21.112 -2.135,8.848 -1.144,15.368 -1.144,23.207 0,26.079 -20.589,48.821 -65.961,48.821 -23.03,0 -51.015,4.191 -72.367,15.911 -15.175,8.305 -27.048,20.336 -32.302,37.023 l 5.956,8.461 11.4,0.155 v 47.889 l -13.91,21.966 3.998,63.645 H -6.364 L -5.22,335.773 C 1.338,331.892 16.36,321.802 29.171,306.279 46.557,285.4 59.902,255.052 44.193,217.486 l 11.744,-5.045 c 12.887,30.814 8.388,57.514 -2.898,79.013 21.58,-0.698 40.11,-2.095 55.819,-4.734 l -3.584,-43.698 12.659,-1.087 L 129.98,387 h 13.116 l 2.212,-94.459 c 10.447,-4.502 34.239,-21.034 45.372,-78.47 1.372,-6.986 2.135,-12.885 2.516,-17.93 1.754,-12.806 2.745,-27.243 3.051,-43.698 l -18.683,-5.976 h 57.42 l 5.567,-12.807 c -5.414,0.233 -11.896,-2.639 -11.896,-2.639 l 1.297,-6.209 H 242 L 176.801,90.428 c -7.244,2.794 -14.87,6.442 -20.208,10.866 -4.27,-3.105 -19.063,-12.807 -39.653,-13.195 z"}),a("path",{id:"path24",class:"wood",d:"M 6.217,24.493 18.494,21 c 5.948,21.577 13.345,33.375 22.648,39.352 8.388,5.099 19.75,5.239 31.799,4.579 C 69.433,63.767 66.154,62.137 63.104,59.886 56.317,54.841 50.522,46.458 46.175,31.246 l 12.201,-3.649 c 3.279,11.488 7.092,18.085 12.201,21.888 5.11,3.726 11.286,4.657 18.606,5.433 13.726,1.553 30.884,2.174 52.312,12.264 2.898,1.086 5.872,2.483 8.769,4.036 -0.381,-0.776 -0.762,-1.553 -1.296,-2.406 -3.66,-5.822 -10.828,-11.953 -24.097,-16.92 l 4.27,-12.109 c 21.581,7.917 30.121,19.171 33.553,28.097 3.965,10.168 1.525,18.124 1.525,18.124 -3.05,1.009 -6.1,2.406 -9.608,3.492 -6.634,-4.579 -12.887,-8.033 -18.835,-10.75 C 113.814,70.442 92.31,76.108 73.246,77.893 58.91,79.213 45.794,78.591 34.432,71.295 23.222,64.155 13.385,50.495 6.217,24.493 Z"}),a("path",{id:"path26",class:"wood",d:"M 90.098,45.294 C 87.582,39.55 86.057,32.487 86.743,23.794 l 12.659,0.932 c -0.763,10.555 2.897,17.696 7.015,22.353 -5.338,-0.931 -10.447,-1.04 -16.319,-1.785 z m 80.069,-1.32 8.312,-9.702 c 21.58,19.094 8.159,46.415 8.159,46.415 l -11.819,-1.32 c -0.382,-6.24 -1.144,-17.836 -6.635,-24.371 3.584,1.84 6.635,3.865 9.99,6.908 0,-5.666 -1.754,-12.341 -8.007,-17.93 z"})])],-1)),Us=[Gs];function Hs(n,e){return u(),d("span",Vs,Us)}const Ls=Ke(Ps,[["render",Hs],["__scopeId","data-v-5cb58bfe"]]),Os={flex:"","justify-between":"",sticky:"","top-0":"","bg-base":"","z-1":"","py-4":"","native:py-7":"","data-tauri-drag-region":""},Ks={hidden:"","xl:block":"","text-secondary":""},Ns={"text-sm":"",italic:"","mt-1":""},Rs={hidden:"","xl:flex":"","items-center":"","me-8":"","mt-2":"","gap-1":""},zs=a("div",{"text-xl":"","i-ri:arrow-left-line":"",class:"rtl-flip","btn-text":""},null,-1),Bs=H({__name:"NavTitle",setup(n){const{env:e}=lt(),t=Ne(),s=E(""),o=Dn();function l(){o.hooks.callHook("elk-logo:click")}return pe(()=>{s.value=t.options.history.state.back}),t.afterEach(()=>{s.value=t.options.history.state.back}),(i,c)=>{const h=Ls,v=de,g=Re;return u(),d("div",Os,[p(v,{flex:"","items-end":"","gap-3":"",py2:"","px-5":"","text-2xl":"","select-none":"","focus-visible:ring":"2 current",to:"/home",onClick:ot(l,["prevent"])},{default:$(()=>[p(h,{"shrink-0":"",aspect:"1/1","sm:h-8":"","xl:h-10":"",class:"rtl-flip"}),Q(a("div",Ks,[L(f(i.$t("app_name"))+" ",1),a("sup",Ns,f(r(e)==="release"?"alpha":r(e)),1)],512),[[Rt,"isHydrated"in i?i.isHydrated:r(Y)]])]),_:1},8,["onClick"]),a("div",Rs,[p(g,{content:i.$t("nav.back")},{default:$(()=>[p(v,{"aria-label":i.$t("nav.back"),class:z({"pointer-events-none op0":!r(s)||r(s)==="/","xl:flex":i.$route.name!=="tag"}),onClick:c[0]||(c[0]=m=>i.$router.go(-1))},{default:$(()=>[zs]),_:1},8,["aria-label","class"])]),_:1},8,["content"])])])}}}),Ws={class:"item",flex:"","items-center":"",gap4:"","w-fit":"","rounded-3":"",px2:"",mx3:"","sm:mxa":"",xl:"ml0 mr5 px5 w-auto","transition-100":"","elk-group-hover":"bg-active","group-focus-visible:ring":"2 current"},Fs={block:"","sm:hidden":"","xl:block":"","select-none":""},js=H({__name:"NavSideItem",props:{text:{},icon:{},to:{},userOnly:{type:Boolean,default:!1},command:{type:Boolean}},setup(n){const e=n,t=Ne();Mn({scope:"Navigation",name:()=>e.text??(typeof e.to=="string"?e.to:e.to.name),icon:()=>e.icon,visible:()=>e.command,onActivate(){t.push(e.to)}});let s=E("text-primary");Tn(async()=>{s.value="",await zt(),s.value="text-primary"});const o=W(()=>!Y.value||e.userOnly&&!te.value),l=W(()=>Y.value&&e.userOnly&&!te.value);return(i,c)=>{const h=Re,v=de;return u(),R(v,{to:i.to,disabled:r(o),class:z(r(l)?"op25 pointer-events-none ":""),"active-class":r(s),group:"","focus:outline-none":"","disabled:pointer-events-none":"",tabindex:r(o)?-1:null,onClick:i.$scrollToTop},{default:$(()=>[p(h,{disabled:!("isMediumOrLargeScreen"in i?i.isMediumOrLargeScreen:r(ys)),content:i.text,placement:"right"},{default:$(()=>[a("div",Ws,[me(i.$slots,"icon",{},()=>[a("div",{class:z(i.icon),"text-xl":""},null,2)],!0),me(i.$slots,"default",{},()=>[a("span",Fs,f(("isHydrated"in i?i.isHydrated:r(Y))?i.text:" "),1)],!0)])]),_:3},8,["disabled","content"])]),_:3},8,["to","disabled","class","active-class","tabindex","onClick"])}}});const Ys=Ke(js,[["__scopeId","data-v-98863956"]]),xe=n=>(Kt("data-v-d387562f"),n=n(),Nt(),n),qs={"sm:px3":"",flex:"~ col gap2",shrink:"","text-size-base":"","leading-normal":"","md:text-lg":"","h-full":"","mt-1":"","overflow-y-auto":""},Xs=xe(()=>a("div",{class:"spacer",shrink:"","xl:hidden":""},null,-1)),Zs={flex:"",relative:""},Qs=xe(()=>a("div",{class:"i-ri:notification-4-line","text-xl":""},null,-1)),Js={key:0,class:"top-[-0.3rem] right-[-0.3rem]",absolute:"","font-bold":"","rounded-full":"","h-4":"","w-4":"","text-xs":"","bg-primary":"","text-inverted":"",flex:"","items-center":"","justify-center":""},eo=xe(()=>a("div",{class:"spacer",shrink:"",hidden:"","sm:block":""},null,-1)),to=xe(()=>a("div",{class:"spacer",shrink:"",hidden:"","sm:block":""},null,-1)),no=xe(()=>a("div",{class:"spacer",shrink:"",hidden:"","sm:block":""},null,-1)),so=H({__name:"NavSide",props:{command:{type:Boolean}},setup(n){const{notifications:e}=on(),t=it("useStarFavoriteIcon");return(s,o)=>{const l=Ys;return u(),d("nav",qs,[p(l,{text:s.$t("nav.search"),to:"/search",icon:"i-ri:search-line","xl:hidden":"",command:s.command},null,8,["text","command"]),Xs,p(l,{text:s.$t("nav.home"),to:"/home",icon:"i-ri:home-5-line","user-only":"",command:s.command},null,8,["text","command"]),p(l,{text:s.$t("nav.notifications"),to:"/notifications",icon:"i-ri:notification-4-line","user-only":"",command:s.command},{icon:$(()=>[a("div",Zs,[Qs,r(e)?(u(),d("div",Js,f(r(e)<10?r(e):"•"),1)):D("",!0)])]),_:1},8,["text","command"]),p(l,{text:s.$t("nav.conversations"),to:"/conversations",icon:"i-ri:at-line","user-only":"",command:s.command},null,8,["text","command"]),p(l,{text:s.$t("nav.favourites"),to:"/favourites",icon:r(t)?"i-ri:star-line":"i-ri:heart-3-line","user-only":"",command:s.command},null,8,["text","icon","command"]),p(l,{text:s.$t("nav.bookmarks"),to:"/bookmarks",icon:"i-ri:bookmark-line","user-only":"",command:s.command},null,8,["text","command"]),eo,p(l,{text:s.$t("action.compose"),to:"/compose",icon:"i-ri:quill-pen-line","user-only":"",command:s.command},null,8,["text","command"]),to,p(l,{text:s.$t("nav.explore"),to:("isHydrated"in s?s.isHydrated:r(Y),"/explore"),icon:"i-ri:hashtag",command:s.command},null,8,["text","to","command"]),p(l,{text:s.$t("nav.local"),to:("isHydrated"in s?s.isHydrated:r(Y),"/public/local"),icon:"i-ri:group-2-line ",command:s.command},null,8,["text","to","command"]),p(l,{text:s.$t("nav.federated"),to:("isHydrated"in s?s.isHydrated:r(Y),"/public"),icon:"i-ri:earth-line",command:s.command},null,8,["text","to","command"]),p(l,{text:s.$t("nav.lists"),to:("isHydrated"in s?s.isHydrated:r(Y),"/lists"),icon:"i-ri:list-check","user-only":"",command:s.command},null,8,["text","to","command"]),no,p(l,{text:s.$t("nav.settings"),to:"/settings",icon:"i-ri:settings-3-line",command:s.command},null,8,["text","command"])])}}});const an=Ke(so,[["__scopeId","data-v-d387562f"]]),oo={p8:"","lg:flex":"~ col gap2",hidden:""},io=["disabled"],ao={key:0,"aria-hidden":"true",block:"",animate:"","animate-spin":"","preserve-3d":"",class:"rtl-flip"},ro=a("span",{block:"","i-ri:loader-2-fill":"","aria-hidden":"true"},null,-1),lo=[ro],co={key:1,"aria-hidden":"true",block:"","i-ri:login-circle-line":"",class:"rtl-flip"},uo=H({__name:"UserSignInEntry",setup(n){const{busy:e,oauth:t,singleInstanceServer:s}=Bt();return(o,l)=>(u(),d("div",oo,[r(s)?(u(),d("button",{key:0,flex:"~ row","gap-x-2":"","items-center":"","justify-center":"","btn-solid":"","text-center":"","text-white":"","rounded-3":"",disabled:r(e),onClick:l[0]||(l[0]=i=>r(t)())},[r(e)?(u(),d("span",ao,lo)):(u(),d("span",co)),L(" "+f(o.$t("action.sign_in")),1)],8,io)):(u(),d("button",{key:1,"btn-solid":"","rounded-3":"","text-center":"","mt-2":"","select-none":"",onClick:l[1]||(l[1]=i=>("openSigninDialog"in o?o.openSigninDialog:r(En))())},f(o.$t("action.sign_in")),1))]))}}),ho=H({__name:"CommonMask",props:{zIndex:{default:100},background:{default:"transparent"}},setup(n){return(e,t)=>(u(),d("div",{fixed:"","top-0":"","bottom-0":"","left-0":"","right-0":"",style:Ue({background:e.background,zIndex:e.zIndex})},null,4))}});function fo(n={}){const{background:e="transparent",getContainer:t=()=>document.body,zIndex:s=100}=n,o=document.createElement("div");function l(){t()?.appendChild(o);const h=In(ho,{background:e,zIndex:s});mt(h,o)}function i(){mt(null,o),o.parentNode?.removeChild(o)}return{show:l,hide:i}}const mo=["aria-label"],rn=H({__name:"UserDropdown",setup(n){const e=fo();return(t,s)=>{const o=Wt,l=Pn,i=ze("VDropdown");return u(),R(i,{distance:0,placement:"top-start",strategy:"fixed",onApplyShow:s[0]||(s[0]=c=>r(e).show()),onApplyHide:s[1]||(s[1]=c=>r(e).hide())},{popper:$(({hide:c})=>[p(l,{onClick:c},null,8,["onClick"])]),default:$(()=>[a("button",{"btn-action-icon":"","aria-label":t.$t("action.switch_account")},[a("div",{class:z({"hidden xl:block":"currentUser"in t?t.currentUser:r(te)}),"i-ri:more-2-line":""},null,2),("currentUser"in t?t.currentUser:r(te))?(u(),R(o,{key:0,"xl:hidden":"",account:("currentUser"in t?t.currentUser:r(te)).account,"w-9":"","h-9":"",square:""},null,8,["account"])):D("",!0)],8,mo)]),_:1})}}}),po={flex:"","justify-start":"","items-end":"","px-2":"","gap-5":""},vo={flex:"~ wrap-reverse","gap-5":""},go=["onClick"],_o={"text-center":""},yo={"text-4":""},bo={flex:"","items-center":"","justify-center":"","w-13":"","h-13":""},ko=H({__name:"UserPicker",setup(n){const e=Ft(),t=Ne();function s(o){o.account.acct===te.value?.account.acct?t.push(jt(o.account)):An(o)}return(o,l)=>{const i=Wt,c=Vn,h=Gn,v=Re,g=rn;return u(),d("div",po,[a("div",vo,[(u(!0),d(A,null,X(r(e),m=>(u(),R(v,{key:m.id,distance:8,delay:{show:300,hide:100}},{popper:$(()=>[a("div",_o,[a("span",yo,[p(c,{account:m.account},null,8,["account"])]),p(h,{account:m.account},null,8,["account"])])]),default:$(()=>[a("button",{flex:"",rounded:"","cursor-pointer":"","aria-label":"Switch user",class:z(m.account.acct===("currentUser"in o?o.currentUser:r(te))?.account.acct?"":"op25 grayscale"),hover:"filter-none op100",onClick:b=>s(m)},[p(i,{"w-13":"","h-13":"",account:m.account,square:""},null,8,["account"])],10,go)]),_:2},1024))),128))]),a("div",bo,[p(g)])])}}}),wo={key:0,"w-full":"","min-h-30px":"",px4:"",py3:"","text-primary":"","bg-base":"",border:"t base",flex:"~ gap-2 center"},$o=a("div",{"i-ri:wifi-off-line":""},null,-1),xo=H({__name:"OfflineChecker",setup(n){const e=Un();return(t,s)=>r(e)?D("",!0):(u(),d("div",wo,[$o,L(" "+f(t.$t("common.offline_desc")),1)]))}}),So={absolute:"","inset-x-0":"","top-auto":"","bottom-full":"","z-20":"","h-100vh":"",flex:"","items-end":"","of-y-scroll":"","of-x-hidden":"","scrollbar-hide":"","overscroll-none":"",bg:"black/50"},Co=a("div",{absolute:"","inset-0":"","opacity-0":"",h:"[calc(100vh+0.5px)]"},null,-1),Do=a("div",{border:"neutral-300 dark:neutral-700 t-1",m:"x-3 y-2"},null,-1),Mo={flex:"~ col gap2"},To=a("span",{class:"i-ri:sun-line dark:i-ri:moon-line flex-shrink-0 text-xl me-4 !align-middle"},null,-1),Eo=["aria-label"],Io=H({__name:"NavBottomMoreMenu",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(n){const e=Yt(n,"modelValue"),t=qt(),s=Xt(),o=E();function l(){e.value=!e.value}const i=E();function c(m){m.target&&!i.value?.children[0].contains(m.target)&&e.value&&(document.removeEventListener("click",c),e.value=!1)}function h(){t.preference=t.value==="dark"?"light":"dark"}ct(e,m=>{m&&typeof document<"u"&&document.addEventListener("click",c)}),Hn(()=>{document.removeEventListener("click",c)});const{dragging:v,dragDistance:g}=Ln(()=>{let b=0,w=0;const x=E(0),M=E(!1);return be(o,"scroll",P=>{b=P.target.scrollTop,x.value>0&&(P.target.scrollTop=0)},{passive:!0}),be(o,"touchstart",P=>{e.value&&(w=P.touches[0].pageY,x.value=0)},{passive:!0}),be(o,"touchmove",P=>{if(!e.value)return;if(b>0&&x.value<=0){M.value=!1,w=P.touches[0].pageY;return}const{pageY:V}=P.touches[0];x.value+=V-w,x.value<0&&(x.value=0),w=V,x.value>1&&(M.value=!0),x.value>0&&(P?.cancelable&&P?.preventDefault&&P.preventDefault(),P?.stopPropagation())},{passive:!0}),be(o,"touchend",()=>{e.value&&(x.value>=120&&(e.value=!1),M.value=!1)},{passive:!0}),{dragDistance:x,dragging:M}});return(m,b)=>{const w=an;return u(),d("div",{ref_key:"buttonEl",ref:i,flex:"","items-center":"",static:""},[me(m.$slots,"default",{toggleVisible:l,show:e.value}),p(Jt,{"enter-active-class":"transition duration-250 ease-out","enter-from-class":"opacity-0 children:translate-y-full","enter-to-class":"opacity-100 children:translate-y-0","leave-active-class":"transition duration-250 ease-in","leave-from-class":"opacity-100 children:translate-y-0","leave-to-class":"opacity-0 children:translate-y-full"},{default:$(()=>[Q(a("div",So,[Co,a("div",{ref_key:"drawerEl",ref:o,style:Ue({transform:r(v)?`translateY(${r(g)}px)`:""}),class:z({"duration-0":r(v),"duration-250":!r(v)}),transition:"transform ease-in","flex-1":"","min-w-48":"","py-6":"",mb:"-1px","of-y-auto":"","scrollbar-hide":"","overscroll-none":"","max-h":"[calc(100vh-200px)]","rounded-t-lg":"",bg:"white/85 dark:neutral-900/85","backdrop-filter":"","backdrop-blur-md":"","border-t-1":"","border-base":""},[p(w),Do,a("div",Mo,[a("button",{flex:"","flex-row":"","items-center":"",block:"","px-5":"","py-2":"","focus-blue":"","w-full":"","text-sm":"","text-base":"",capitalize:"","text-left":"","whitespace-nowrap":"","transition-colors":"","duration-200":"",transform:"",hover:"bg-gray-100 dark:bg-gray-700 dark:text-white",onClick:b[0]||(b[0]=x=>h())},[To,L(" "+f(r(t).value==="light"?m.$t("menu.toggle_theme.dark"):m.$t("menu.toggle_theme.light")),1)]),a("button",{flex:"","flex-row":"","items-center":"",block:"","px-5":"","py-2":"","focus-blue":"","w-full":"","text-sm":"","text-base":"",capitalize:"","text-left":"","whitespace-nowrap":"","transition-colors":"","duration-200":"",transform:"",hover:"bg-gray-100 dark:bg-gray-700 dark:text-white","aria-label":m.$t("nav.zen_mode"),onClick:b[1]||(b[1]=x=>("togglePreferences"in m?m.togglePreferences:r(Zt))("zenMode"))},[a("span",{class:z([("getPreferences"in m?m.getPreferences:r(Qt))(r(s),"zenMode")?"i-ri:layout-right-2-line":"i-ri:layout-right-line","flex-shrink-0 text-xl me-4 !align-middle"])},null,2),L(" "+f(m.$t("nav.zen_mode")),1)],8,Eo)])],6)],512),[[Rt,e.value]])]),_:1})],512)}}}),Po={"h-14":"",border:"t base",flex:"","flex-row":"","text-xl":"","of-y-scroll":"","scrollbar-hide":"","overscroll-none":"",class:"after-content-empty after:h-[calc(100%+0.5px)] after:w-0.1px after:pointer-events-none"},Ao=a("div",{"i-ri:home-5-line":""},null,-1),Vo=a("div",{"i-ri:search-line":""},null,-1),Go={flex:"",relative:""},Uo=a("div",{class:"i-ri:notification-4-line","text-xl":""},null,-1),Ho={key:0,class:"top-[-0.3rem] right-[-0.3rem]",absolute:"","font-bold":"","rounded-full":"","h-4":"","w-4":"","text-xs":"","bg-primary":"","text-inverted":"",flex:"","items-center":"","justify-center":""},Lo=a("div",{"i-ri:at-line":""},null,-1),Oo=a("div",{"i-ri:hashtag":""},null,-1),Ko=a("div",{"i-ri:group-2-line":""},null,-1),No=a("div",{"i-ri:earth-line":""},null,-1),Ro=["onClick"],zo=H({__name:"NavBottom",setup(n){const e=E(!1),{notifications:t}=on();return(s,o)=>{const l=de,i=Io;return u(),d("nav",Po,[("currentUser"in s?s.currentUser:r(te))?(u(),d(A,{key:0},[p(l,{to:"/home","aria-label":s.$t("nav.home"),"active-class":r(e)?"":"text-primary",flex:"","flex-row":"","items-center":"","place-content-center":"","h-full":"","flex-1":"",class:"coarse-pointer:select-none",onClick:s.$scrollToTop},{default:$(()=>[Ao]),_:1},8,["aria-label","active-class","onClick"]),p(l,{to:"/search","aria-label":s.$t("nav.search"),"active-class":r(e)?"":"text-primary",flex:"","flex-row":"","items-center":"","place-content-center":"","h-full":"","flex-1":"",class:"coarse-pointer:select-none",onClick:s.$scrollToTop},{default:$(()=>[Vo]),_:1},8,["aria-label","active-class","onClick"]),p(l,{to:"/notifications","aria-label":s.$t("nav.notifications"),"active-class":r(e)?"":"text-primary",flex:"","flex-row":"","items-center":"","place-content-center":"","h-full":"","flex-1":"",class:"coarse-pointer:select-none",onClick:s.$scrollToTop},{default:$(()=>[a("div",Go,[Uo,r(t)?(u(),d("div",Ho,f(r(t)<10?r(t):"•"),1)):D("",!0)])]),_:1},8,["aria-label","active-class","onClick"]),p(l,{to:"/conversations","aria-label":s.$t("nav.conversations"),"active-class":r(e)?"":"text-primary",flex:"","flex-row":"","items-center":"","place-content-center":"","h-full":"","flex-1":"",class:"coarse-pointer:select-none",onClick:s.$scrollToTop},{default:$(()=>[Lo]),_:1},8,["aria-label","active-class","onClick"])],64)):(u(),d(A,{key:1},[p(l,{to:"/explore","aria-label":s.$t("nav.explore"),"active-class":r(e)?"":"text-primary",flex:"","flex-row":"","items-center":"","place-content-center":"","h-full":"","flex-1":"",class:"coarse-pointer:select-none",onClick:s.$scrollToTop},{default:$(()=>[Oo]),_:1},8,["aria-label","active-class","onClick"]),p(l,{group:"",to:"/public/local","aria-label":s.$t("nav.local"),"active-class":r(e)?"":"text-primary",flex:"","flex-row":"","items-center":"","place-content-center":"","h-full":"","flex-1":"",class:"coarse-pointer:select-none",onClick:s.$scrollToTop},{default:$(()=>[Ko]),_:1},8,["aria-label","active-class","onClick"]),p(l,{to:"/public","aria-label":s.$t("nav.federated"),"active-class":r(e)?"":"text-primary",flex:"","flex-row":"","items-center":"","place-content-center":"","h-full":"","flex-1":"",class:"coarse-pointer:select-none",onClick:s.$scrollToTop},{default:$(()=>[No]),_:1},8,["aria-label","active-class","onClick"])],64)),p(i,{modelValue:r(e),"onUpdate:modelValue":o[0]||(o[0]=c=>O(e)?e.value=c:null),flex:"","flex-row":"","items-center":"","place-content-center":"","h-full":"","flex-1":"","cursor-pointer":""},{default:$(({toggleVisible:c,show:h})=>[a("button",{flex:"","items-center":"","place-content-center":"","h-full":"","flex-1":"",class:z(["select-none",h?"!text-primary":""]),"aria-label":"More menu",onClick:c},[a("span",{class:z(h?"i-ri:close-fill":"i-ri:more-fill")},null,2)],10,Ro)]),_:1},8,["modelValue"])])}}}),Bo={},Wo={key:0,"m-2":"",p5:"",bg:"primary-fade",relative:"","rounded-lg":"","of-hidden":"",flex:"~ col gap-3"},Fo={flex:"~ gap-2","items-center":""},jo={flex:"~ gap-1"},Yo=a("div",{"i-ri-arrow-down-circle-line":"",absolute:"","text-8em":"","bottom--10":"","inset-ie--10":"","text-primary":"","dark:text-white":"",op10:"",class:"-z-1"},null,-1);function qo(n,e){return n.$pwa?.needRefresh?(u(),d("div",Wo,[a("h2",Fo,f(n.$t("pwa.title")),1),a("div",jo,[a("button",{type:"button","btn-solid":"","px-4":"","py-1":"","text-center":"","text-sm":"",onClick:e[0]||(e[0]=t=>n.$pwa.updateServiceWorker())},f(n.$t("pwa.update")),1),a("button",{type:"button","btn-text":"","filter-saturate-0":"","px-4":"","py-1":"","text-center":"","text-sm":"",onClick:e[1]||(e[1]=t=>n.$pwa.close())},f(n.$t("pwa.dismiss")),1)]),Yo])):D("",!0)}const Xo=Ke(Bo,[["render",qo]]),Zo={p4:"","text-sm":"","text-secondary-light":"",flex:"~ col"},Qo={flex:"~ gap2","items-center":"",mb4:""},Jo=["aria-label"],ei=["aria-label"],ti=["datetime","title"],ni={key:1},si={key:3},oi=H({__name:"NavFooter",setup(n){const e=lt(),t=On(),s=Xt(),o=new Date(e.time),l=Kn(o,t),i=qt();function c(){i.preference=i.value==="dark"?"light":"dark"}return(h,v)=>{const g=Re,m=ze("i18n-t"),b=de;return u(),d("footer",Zo,[a("div",Qo,[p(g,{content:h.$t("nav.toggle_theme")},{default:$(()=>[a("button",{flex:"","i-ri:sun-line":"","dark-i-ri:moon-line":"","text-lg":"","aria-label":h.$t("nav.toggle_theme"),onClick:v[0]||(v[0]=w=>c())},null,8,Jo)]),_:1},8,["content"]),p(g,{content:h.$t("nav.zen_mode")},{default:$(()=>[a("button",{flex:"","text-lg":"",class:z(("getPreferences"in h?h.getPreferences:r(Qt))(r(s),"zenMode")?"i-ri:layout-right-2-line":"i-ri:layout-right-line"),"aria-label":h.$t("nav.zen_mode"),onClick:v[1]||(v[1]=w=>("togglePreferences"in h?h.togglePreferences:r(Zt))("zenMode"))},null,10,ei)]),_:1},8,["content"])]),a("div",null,[("isHydrated"in h?h.isHydrated:r(Y))?(u(),R(m,{key:0,keypath:"nav.built_at"},{default:$(()=>[a("time",{datetime:String(r(o)),title:h.$d(r(o),"long")},f(r(l)),9,ti)]),_:1})):(u(),d("span",ni,f(h.$t("nav.built_at",[h.$d(r(o),"shortDate")])),1)),L(" · "),r(e).env==="release"?(u(),R(b,{key:2,external:"",href:`https://github.com/elk-zone/elk/releases/tag/v${r(e).version}`,target:"_blank","font-mono":""},{default:$(()=>[L(" v"+f(r(e).version),1)]),_:1},8,["href"])):(u(),d("span",si,f(r(e).env),1)),r(e).commit&&r(e).branch!=="release"?(u(),d(A,{key:4},[L(" · "),p(b,{external:"",href:`https://github.com/elk-zone/elk/commit/${r(e).commit}`,target:"_blank","font-mono":""},{default:$(()=>[L(f(r(e).shortCommit),1)]),_:1},8,["href"])],64)):D("",!0)])])}}}),ii={flex:"~ center","items-end":"",mb2:"","gap-x-2":""},ai=["src","alt"],ri={"text-3xl":""},li=a("span",{"text-secondary-light":"",me1:""},"https://",-1),ci=["onKeydown"],ui={key:0,absolute:"","left-6em":"","right-0":"",top:"100%","bg-base":"",rounded:"",border:"~ base","z-10":"",shadow:"","of-auto":"","overflow-y-auto":"",class:"max-h-[8rem]"},di=["id","value","onClick"],hi={"min-h-4":""},fi={key:0,role:"alert","p-0":"","m-0":"","text-xs":"","text-red-600":"","dark:text-red-400":""},mi={"text-secondary":"","text-sm":"",flex:""},pi=a("div",{"i-ri:lightbulb-line":"","me-1":""},null,-1),vi=["disabled"],gi={key:0,"aria-hidden":"true",block:"",animate:"","animate-spin":"","preserve-3d":"",class:"rtl-flip"},_i=a("span",{block:"","i-ri:loader-2-fill":"","aria-hidden":"true"},null,-1),yi=[_i],bi={key:1,"aria-hidden":"true",block:"","i-ri:login-circle-line":"",class:"rtl-flip"},ki=H({__name:"UserSignIn",setup(n){const e=E();let t=E([]),s=E(0),o=E(!1);const{busy:l,error:i,displayError:c,server:h,oauth:v}=Bt(e);let g=Nn(new pt([]));const m=W(()=>{if(!h.value)return[];const S=g.value.search(h.value,{limit:6}).map(k=>k.item);return S[0]===h.value?[]:S});function b(S){try{return new URL(S),!0}catch{return!1}}async function w(){const S=h.value.trim();S.startsWith("https://")&&(h.value=S.replace("https://","")),S.length&&(c.value=!1),b(`https://${S}`)&&S.match(/^[a-z0-9-]+(\.[a-z0-9-]+)+(:[0-9]+)?$/i)&&!m.value.some(k=>k.includes(S))?o.value=!1:o.value=!0}function x(S){return S.replace(/[^\w-]/g,"-")}function M(S){if(m.value.length===0){s.value=0;return}s.value=(s.value+S+m.value.length)%m.value.length,document.querySelector(`#${x(m.value[s.value])}`)?.scrollIntoView(!1)}function P(S){o.value===!0&&m.value[s.value]&&(h.value=m.value[s.value],S.preventDefault(),o.value=!1)}function V(S){o.value&&(o.value=!1,S.stopPropagation())}function G(S){h.value=m.value[S]}return pe(async()=>{e?.value?.focus(),t.value=await globalThis.$fetch("/api/list-servers"),g.value=new pt(t.value,{shouldSort:!0})}),Rn(e,()=>{o.value=!1}),(S,k)=>{const y=de,C=ze("i18n-t");return u(),d("form",{"text-center":"","justify-center":"","items-center":"","max-w-150":"",py6:"",flex:"~ col gap-3",onSubmit:k[4]||(k[4]=ot((...N)=>r(v)&&r(v)(...N),["prevent"]))},[a("div",ii,[a("img",{src:"/logo.svg","w-12":"","h-12":"",mxa:"",height:"48",width:"48",alt:S.$t("app_logo"),class:"rtl-flip"},null,8,ai),a("div",ri,f(S.$t("action.sign_in")),1)]),a("div",null,f(S.$t("user.server_address_label")),1),a("div",{class:z(r(i)?"animate animate-shake-x animate-delay-100":null)},[a("div",{dir:"ltr",flex:"","bg-gray:10":"",px4:"",py2:"",mxa:"",rounded:"",border:"~ base","items-center":"","font-mono":"","focus:outline-none":"","focus:ring":"2 primary inset",relative:"",class:z(r(c)?"border-red-600 dark:border-red-400":null)},[li,Q(a("input",{ref_key:"input",ref:e,"onUpdate:modelValue":k[0]||(k[0]=N=>O(h)?h.value=N:null),autocapitalize:"off",inputmode:"url","outline-none":"","bg-transparent":"","w-full":"","max-w-50":"",spellcheck:"false",autocorrect:"off",autocomplete:"off",onInput:w,onKeydown:[k[1]||(k[1]=Ee(N=>M(1),["down"])),k[2]||(k[2]=Ee(N=>M(-1),["up"])),Ee(P,["enter"]),Ee(ot(V,["prevent"]),["esc"])],onFocus:k[3]||(k[3]=N=>O(o)?o.value=!0:o=!0)},null,40,ci),[[ut,r(h)]]),r(o)&&m.value.length?(u(),d("div",ui,[(u(!0),d(A,null,X(m.value,(N,ie)=>(u(),d("button",{id:x(N),key:N,value:N,"px-2":"",py1:"","font-mono":"","w-full":"","text-left":"",class:z(r(s)===ie?"text-primary font-bold":null),onClick:_=>G(ie)},f(N),11,di))),128))])):D("",!0)],2),a("div",hi,[p(Jt,{css:"","enter-active-class":"animate animate-fade-in"},{default:$(()=>[r(c)?(u(),d("p",fi,f(S.$t("error.sign_in_error")),1)):D("",!0)]),_:1})])],2),a("div",mi,[pi,a("span",null,[p(C,{keypath:"user.tip_no_account"},{default:$(()=>[p(y,{href:"https://joinmastodon.org/servers",target:"_blank",external:"",class:"text-primary",hover:"underline"},{default:$(()=>[L(f(S.$t("user.tip_register_account")),1)]),_:1})]),_:1})])]),a("button",{flex:"~ row","gap-x-2":"","items-center":"","btn-solid":"",mt2:"",disabled:!r(h)||r(l)},[r(l)?(u(),d("span",gi,yi)):(u(),d("span",bi)),L(" "+f(S.$t("action.sign_in")),1)],8,vi)],32)}}}),wi={"my-8":"","px-3":"","sm:px-8":"","md:max-w-200":"",flex:"~ col gap-4",relative:""},$i=a("div",{"i-ri:close-line":""},null,-1),xi=[$i],Si=["alt","src"],Ci={mxa:"","text-4xl":"",mb4:""},Di={"text-primary":""},Mi={flex:"~ gap-2 wrap",mxa:""},Ti=["src","alt"],Ei={italic:"",flex:"","justify-center":"","w-full":""},Ii={"text-xl":"","font-script":"","hover:text-primary":"",transition:"","duration-300":""},Pi=H({__name:"HelpPreview",emits:["close"],setup(n,{emit:e}){return(t,s)=>{const o=de;return u(),d("div",wi,[a("button",{"btn-action-icon":"",absolute:"","top--8":"","right-0":"",m1:"","aria-label":"Close",onClick:s[0]||(s[0]=l=>e("close"))},xi),a("img",{alt:t.$t("app_logo"),src:"/logo.svg","w-20":"","h-20":"",height:"80",width:"80",mxa:"",class:"rtl-flip"},null,8,Si),a("h1",Ci,f(t.$t("help.title")),1),a("p",null,f(t.$t("help.desc_para1")),1),a("p",null,[a("b",Di,f(t.$t("help.desc_highlight")),1),L(" "+f(t.$t("help.desc_para2")),1)]),a("p",null,[L(f(t.$t("help.desc_para4"))+" ",1),p(o,{"font-bold":"","text-primary":"",href:"https://github.com/elk-zone/elk",target:"_blank"},{default:$(()=>[L(f(t.$t("help.desc_para5")),1)]),_:1}),L(" "+f(t.$t("help.desc_para6")),1)]),L(" "+f(t.$t("help.desc_para3"))+" ",1),a("p",Mi,[(u(!0),d(A,null,X("elkTeamMembers"in t?t.elkTeamMembers:r(zn),l=>(u(),R(o,{key:l.github,href:`https://github.com/sponsors/${l.github}`,target:"_blank",external:"","rounded-full":"",transition:"","duration-300":"",border:"~ transparent",hover:"scale-105 border-primary"},{default:$(()=>[a("img",{src:`/avatars/${l.github}-100x100.png`,alt:l.display,"rounded-full":"","w-15":"","h-15":"",height:"60",width:"60"},null,8,Ti)]),_:2},1032,["href"]))),128))]),a("p",Ei,[p(o,{href:"https://github.com/sponsors/elk-zone",target:"_blank"},{default:$(()=>[a("span",Ii,f(t.$t("help.footer_team")),1)]),_:1})]),a("button",{"btn-solid":"",mxa:"",tabindex:"2",onClick:s[1]||(s[1]=l=>e("close"))},f(t.$t("action.enter_app")),1)])}}});function Ai(){try{return"constructor"in GestureEvent}catch{return!1}}function ln(){return typeof window<"u"&&"ontouchstart"in window}function cn(n){return"pointerId"in n?null:n.type==="touchend"?n.changedTouches:n.targetTouches}function dt(n){return Array.from(cn(n)).map(e=>e.identifier)}function J(n){const e="buttons"in n?n.buttons:0,{shiftKey:t,altKey:s,metaKey:o,ctrlKey:l}=n;return{buttons:e,shiftKey:t,altKey:s,metaKey:o,ctrlKey:l}}const Se=n=>n;function fe(n,e=Se){const t=cn(n),{clientX:s,clientY:o}=t?t[0]:n;return e([s,o])}function Tt(n,e,t=Se){const[s,o]=Array.from(n.touches).filter(w=>e.includes(w.identifier));if(!s||!o)throw Error("The event doesn't have two pointers matching the pointerIds");const l=o.clientX-s.clientX,i=o.clientY-s.clientY,c=(o.clientX+s.clientX)/2,h=(o.clientY+s.clientY)/2,v=Math.hypot(l,i),g=-(Math.atan2(l,i)*180)/Math.PI,m=t([v,g]),b=t([c,h]);return{values:m,origin:b}}function Vi(n,e=Se){const{scrollX:t,scrollY:s,scrollLeft:o,scrollTop:l}=n.currentTarget;return e([t||o||0,s||l||0])}const Et=40,It=800;function un(n,e=Se){let{deltaX:t,deltaY:s,deltaMode:o}=n;return o===1?(t*=Et,s*=Et):o===2&&(t*=It,s*=It),e([t,s])}function Pt(n,e=Se){return e([n.scale,n.rotation])}function dn(){}function hn(...n){return n.length===0?dn:n.length===1?n[0]:function(){var e;for(let t of n)e=t.apply(this,arguments)||e;return e}}function re(n,e){if(n===void 0){if(e===void 0)throw new Error("Must define fallback value if undefined is expected");n=e}return Array.isArray(n)?n:[n,n]}function At(n,e){return Object.assign({},e,n||{})}function He(n,...e){return typeof n=="function"?n(...e):n}function _e(n){return{_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,_dragStarted:!1,_dragPreventScroll:!1,_dragIsTap:!0,_dragDelayed:!1,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:dn,canceled:!1,memo:void 0,args:void 0,...n}}function fn(){const n={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1,locked:!1},e=_e({_pointerId:void 0,axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,tap:!1,swipe:[0,0]}),t=_e({_pointerIds:[],da:[0,0],vdva:[0,0],origin:void 0,turns:0}),s=_e({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),o=_e({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),l=_e({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:n,drag:e,pinch:t,wheel:s,move:o,scroll:l}}class Gi{constructor(e){this.classes=e,this.pointerIds=new Set,this.touchIds=new Set,this.supportsTouchEvents=ln(),this.supportsGestureEvents=Ai(),this.bind=(...t)=>{const s={};for(let o of this.classes)new o(this,t).addBindings(s);for(let o in this.nativeRefs)K(s,o,l=>this.nativeRefs[o]({...this.state.shared,event:l,args:t}));return this.config.domTarget?Oi(this,s):Ki(this,s)},this.clean=()=>{const{eventOptions:t,domTarget:s}=this.config,o=r(s);o&&Ce(o,vn(this.domListeners),t),Object.values(this.timeouts).forEach(clearTimeout),Ui(this)},this.classes=e,this.state=fn(),this.timeouts={},this.domListeners=[],this.windowListeners={}}}function mn(n,e){"pointerId"in e?n.pointerIds.add(e.pointerId):n.touchIds=new Set(dt(e))}function pn(n,e){"pointerId"in e?n.pointerIds.delete(e.pointerId):dt(e).forEach(t=>n.touchIds.delete(t))}function Ui(n){const{config:{window:e,eventOptions:t},windowListeners:s}=n,o=r(e);if(o){for(let l in s){const i=s[l];Ce(o,i,t)}n.windowListeners={}}}function Hi({config:n,windowListeners:e},t,s=n.eventOptions){const o=r(n.window);o&&(Ce(o,e[t],s),delete e[t])}function Li({config:n,windowListeners:e},t,s=[],o=n.eventOptions){const l=r(n.window);l&&(Ce(l,e[t],o),gn(l,e[t]=s,o))}function Oi({config:n,domListeners:e},t){const{eventOptions:s,domTarget:o}=n,l=r(o);if(!l)throw new Error("domTarget must be defined");Ce(l,vn(e),s);for(let[i,c]of Object.entries(t)){const h=i.slice(2).toLowerCase();e.push([h,hn(...c)])}gn(l,e,s)}function Ki({config:n},e){const t={},s=n.eventOptions.capture?"Capture":"";for(let[o,l]of Object.entries(e)){const i=Array.isArray(l)?l:[l],c=o+s;t[c]=hn(...i)}return t}function vn(n=[]){return n.splice(0,n.length)}function K(n,e,t){n[e]||(n[e]=[]),n[e].push(t)}function gn(n,e=[],t={}){if(n)for(let[s,o]of e)n.addEventListener(s,o,t)}function Ce(n,e=[],t={}){if(n)for(let[s,o]of e)n.removeEventListener(s,o,t)}function Le(n,e){return n.map((t,s)=>t+e[s])}function ht(n,e){return n.map((t,s)=>t-e[s])}function we(n){return Math.hypot(...n)}function _n(n,e=n){const t=we(e),s=t===0?0:1/t,o=e.map(i=>s*i);return{distance:we(n),direction:o}}function yn(n,e,t){const s=we(e),o=s===0?0:1/s,l=t===0?0:1/t,i=l*s,c=e.map(g=>l*g),h=e.map(g=>o*g),v=we(n);return{velocities:c,velocity:i,distance:v,direction:h}}function Oe(n){return Math.sign?Math.sign(n):+(n>0)-+(n<0)||+n}function Ni(n,e,t){return Math.max(e,Math.min(n,t))}function Ri(n,e){return Math.pow(n,e*5)}function Vt(n,e,t){return e===0||Math.abs(e)===1/0?Ri(n,t):n*e*t/(e+t*n)}function Gt(n,e,t,s=.15){return s===0?Ni(n,e,t):n<e?-Vt(e-n,t-e,s)+e:n>t?+Vt(n-t,t-e,s)+t:n}const ee=new Map,zi=n=>n;class bn{constructor(e,t=[]){this.controller=e,this.args=t,this.debounced=!0,this.setTimeout=(s,o=140,...l)=>{clearTimeout(this.controller.timeouts[this.stateKey]),this.controller.timeouts[this.stateKey]=window.setTimeout(s,o,...l)},this.clearTimeout=()=>{clearTimeout(this.controller.timeouts[this.stateKey])},this.fireGestureHandler=(s=!1)=>{if(this.state._blocked)return this.debounced||(this.state._active=!1,this.clean()),null;if(!s&&!this.state.intentional&&!this.config.triggerAllEvents)return null;if(this.state.intentional){const h=this.state.active,v=this.state._active;this.state.active=v,this.state.first=v&&!h,this.state.last=h&&!v,this.controller.state.shared[this.ingKey]=v}const o=this.controller.pointerIds.size||this.controller.touchIds.size,l=this.controller.state.shared.buttons>0||o>0,i={...this.controller.state.shared,...this.state,...this.mapStateValues(this.state),locked:!!document.pointerLockElement,touches:o,down:l},c=this.handler(i);return this.state.memo=c!==void 0?c:this.state.memo,i},this.controller=e,this.args=t}get config(){return this.controller.config[this.stateKey]}get enabled(){return this.controller.config.enabled&&this.config.enabled}get state(){return this.controller.state[this.stateKey]}get handler(){return this.controller.handlers[this.stateKey]}get transform(){return this.config.transform||this.controller.config.transform||zi}updateSharedState(e){Object.assign(this.controller.state.shared,e)}updateGestureState(e){Object.assign(this.state,e)}checkIntentionality(e,t){return{_intentional:e,_blocked:!1}}getMovement(e){const{rubberband:t,threshold:s}=this.config,{_bounds:o,_initial:l,_active:i,_intentional:c,lastOffset:h,movement:v}=this.state,g=this.getInternalMovement(e,this.state),m=this.transform(s).map(Math.abs),b=c[0]===!1?Ut(g[0],m[0]):c[0],w=c[1]===!1?Ut(g[1],m[1]):c[1],x=this.checkIntentionality([b,w],g);if(x._blocked)return{...x,_movement:g,delta:[0,0]};const M=x._intentional,P=g;let V=[M[0]!==!1?g[0]-M[0]:0,M[1]!==!1?g[1]-M[1]:0];const G=Le(V,h),S=i?t:[0,0];return V=Ht(o,Le(V,l),S),{...x,intentional:M[0]!==!1||M[1]!==!1,_initial:l,_movement:P,movement:V,values:e,offset:Ht(o,G,S),delta:ht(V,v)}}clean(){this.clearTimeout()}}function Ut(n,e){return Math.abs(n)>=e?Oe(n)*e:!1}function Ht(n,[e,t],[s,o]){const[[l,i],[c,h]]=n;return[Gt(e,l,i,s),Gt(t,c,h,o)]}function F({state:n},e,t){const{timeStamp:s,type:o}=e,l=n.values,i=t?0:s-n.startTime;return{_lastEventType:o,event:e,timeStamp:s,elapsedTime:i,previous:l}}function ue({state:n,config:e,stateKey:t,args:s},o,l){const i=n.offset,c=l.timeStamp,{initial:h,bounds:v}=e,g={...fn()[t],_active:!0,args:s,values:o,initial:o,offset:i,lastOffset:i,startTime:c};return{...g,_initial:He(h,g),_bounds:He(v,g)}}class We extends bn{getInternalMovement(e,t){return ht(e,t.initial)}checkIntentionality(e,t){if(e[0]===!1&&e[1]===!1)return{_intentional:e,axis:this.state.axis};const[s,o]=t.map(Math.abs),l=this.state.axis||(s>o?"x":s<o?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:e,_blocked:!1,axis:l}:l?this.config.axis&&l!==this.config.axis?{_intentional:e,_blocked:!0,axis:l}:(e[l==="x"?1:0]=!1,{_intentional:e,_blocked:!1,axis:l}):{_intentional:[!1,!1],_blocked:!1,axis:l}}getKinematics(e,t){const s=this.getMovement(e);if(!s._blocked){const o=t.timeStamp-this.state.timeStamp;Object.assign(s,yn(s.movement,s.delta,o))}return s}mapStateValues(e){return{xy:e.values,vxvy:e.velocities}}}const Bi=3;function Lt(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}class Wi extends We{constructor(){super(...arguments),this.ingKey="dragging",this.stateKey="drag",this.setPointerCapture=e=>{if(this.config.useTouch||document.pointerLockElement)return;const{target:t,pointerId:s}=e;t&&"setPointerCapture"in t&&t.setPointerCapture(s),this.updateGestureState({_dragTarget:t,_dragPointerId:s})},this.releasePointerCapture=()=>{if(this.config.useTouch||document.pointerLockElement)return;const{_dragTarget:e,_dragPointerId:t}=this.state;if(t&&e&&"releasePointerCapture"in e&&(!("hasPointerCapture"in e)||e.hasPointerCapture(t)))try{e.releasePointerCapture(t)}catch{}},this.preventScroll=e=>{this.state._dragPreventScroll&&e.cancelable&&e.preventDefault()},this.getEventId=e=>this.config.useTouch?e.changedTouches[0].identifier:e.pointerId,this.isValidEvent=e=>this.state._pointerId===this.getEventId(e),this.shouldPreventWindowScrollY=this.config.preventWindowScrollY&&this.controller.supportsTouchEvents,this.setUpWindowScrollDetection=e=>{Lt(e),Li(this.controller,this.stateKey,[["touchmove",this.preventScroll],["touchend",this.clean.bind(this)],["touchcancel",this.clean.bind(this)]],{passive:!1}),this.setTimeout(this.startDrag.bind(this),250,e)},this.setUpDelayedDragTrigger=e=>{this.state._dragDelayed=!0,Lt(e),this.setTimeout(this.startDrag.bind(this),this.config.delay,e)},this.setStartState=e=>{const t=fe(e,this.transform);this.updateSharedState(J(e)),this.updateGestureState({...ue(this,t,e),...F(this,e,!0),_pointerId:this.getEventId(e)}),this.updateGestureState(this.getMovement(t))},this.onDragStart=e=>{mn(this.controller,e),!(!this.enabled||this.state._active)&&(this.setStartState(e),this.setPointerCapture(e),this.shouldPreventWindowScrollY?this.setUpWindowScrollDetection(e):this.config.delay>0?this.setUpDelayedDragTrigger(e):this.startDrag(e,!0))},this.onDragChange=e=>{if(this.state.canceled||!this.state._active||!this.isValidEvent(e)||this.state._lastEventType===e.type&&e.timeStamp===this.state.timeStamp)return;let t;if(document.pointerLockElement){const{movementX:h,movementY:v}=e;t=Le(this.transform([h,v]),this.state.values)}else t=fe(e,this.transform);const s=this.getKinematics(t,e);if(!this.state._dragStarted){if(this.state._dragDelayed){this.startDrag(e);return}if(this.shouldPreventWindowScrollY)if(!this.state._dragPreventScroll&&s.axis)if(s.axis==="x")this.startDrag(e);else{this.state._active=!1;return}else return;else return}const o=J(e);this.updateSharedState(o);const l=F(this,e),i=we(s._movement);let{_dragIsTap:c}=this.state;c&&i>=Bi&&(c=!1),this.updateGestureState({...l,...s,_dragIsTap:c}),this.fireGestureHandler()},this.onDragEnd=e=>{if(pn(this.controller,e),!this.isValidEvent(e)||(this.clean(),!this.state._active))return;this.state._active=!1;const t=this.state._dragIsTap,[s,o]=this.state.velocities,[l,i]=this.state.movement,[c,h]=this.state._intentional,[v,g]=this.config.swipeVelocity,[m,b]=this.config.swipeDistance,w=this.config.swipeDuration,x={...F(this,e),...this.getMovement(this.state.values)},M=[0,0];x.elapsedTime<w&&(c!==!1&&Math.abs(s)>v&&Math.abs(l)>m&&(M[0]=Oe(s)),h!==!1&&Math.abs(o)>g&&Math.abs(i)>b&&(M[1]=Oe(o))),this.updateSharedState({buttons:0}),this.updateGestureState({...x,tap:t,swipe:M}),this.fireGestureHandler(this.config.filterTaps&&t===!0)},this.clean=()=>{super.clean(),this.state._dragStarted=!1,this.releasePointerCapture(),Hi(this.controller,this.stateKey)},this.onCancel=()=>{this.state.canceled||(this.updateGestureState({canceled:!0,_active:!1}),this.updateSharedState({buttons:0}),zt(this.fireGestureHandler))},this.onClick=e=>{this.state._dragIsTap||e.stopPropagation()}}startDrag(e,t=!1){!this.state._active||this.state._dragStarted||(t||this.setStartState(e),this.updateGestureState({_dragStarted:!0,_dragPreventScroll:!0,cancel:this.onCancel}),this.clearTimeout(),this.fireGestureHandler())}addBindings(e){if(this.config.useTouch?(K(e,"onTouchStart",this.onDragStart),K(e,"onTouchMove",this.onDragChange),K(e,"onTouchEnd",this.onDragEnd),K(e,"onTouchCancel",this.onDragEnd)):(K(e,"onPointerDown",this.onDragStart),K(e,"onPointerMove",this.onDragChange),K(e,"onPointerUp",this.onDragEnd),K(e,"onPointerCancel",this.onDragEnd)),this.config.filterTaps){const t=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";K(e,t,this.onClick)}}}function De(n={},e){const t={};for(const[s,o]of Object.entries(e))switch(typeof o){case"function":t[s]=o.call(t,n[s],s,n);break;case"object":t[s]=De(n[s],o);break;case"boolean":o&&(t[s]=n[s]);break}return t}const Fi=180,ji=.15,Yi=.5,qi=50,Xi=250,kn={threshold(n=0){return re(n)},rubberband(n=0){switch(n){case!0:return re(ji);case!1:return re(0);default:return re(n)}},enabled(n=!0){return n},triggerAllEvents(n=!1){return n},initial(n=0){return typeof n=="function"?n:re(n)},transform:!0},ft={...kn,axis:!0,lockDirection(n=!1){return n},bounds(n={}){if(typeof n=="function")return l=>ft.bounds(n(l));const{left:e=-1/0,right:t=1/0,top:s=-1/0,bottom:o=1/0}=n;return[[e,t],[s,o]]}},Zi=typeof window<"u"&&window.document&&window.document.createElement,Qi={enabled(n=!0){return n},domTarget:!0,window(n=Zi?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform:!0},Ji={...kn,bounds(n,e,{distanceBounds:t={},angleBounds:s={}}){const o=i=>{const c=At(He(t,i),{min:-1/0,max:1/0});return[c.min,c.max]},l=i=>{const c=At(He(s,i),{min:-1/0,max:1/0});return[c.min,c.max]};return typeof t!="function"&&typeof s!="function"?[o(),l()]:i=>[o(i),l(i)]}},ea={...ft,useTouch(n=!0){return n&&ln()},preventWindowScrollY(n=!1){return n},threshold(n,e,{filterTaps:t=!1,lockDirection:s=!1,axis:o=void 0}){const l=re(n,t?3:s||o?1:0);return this.filterTaps=t,l},swipeVelocity(n=Yi){return re(n)},swipeDistance(n=qi){return re(n)},swipeDuration(n=Xi){return n},delay(n=0){switch(n){case!0:return Fi;case!1:return 0;default:return n}}};function ta(n){return De(n,Qi)}function st(n={}){return De(n,ft)}function na(n={}){return De(n,Ji)}function sa(n={}){return De(n,ea)}function oa(n,e=new Set){const{drag:t,wheel:s,move:o,scroll:l,pinch:i,hover:c,eventOptions:h,window:v,transform:g,domTarget:m,enabled:b}=n,w=ta({domTarget:m,eventOptions:h,transform:g,window:v,enabled:b});return e.has("onDrag")&&(w.drag=sa(t)),e.has("onWheel")&&(w.wheel=st(s)),e.has("onScroll")&&(w.scroll=st(l)),e.has("onMove")&&(w.move=st(o)),e.has("onPinch")&&(w.pinch=na(i)),e.has("onHover")&&(w.hover={enabled:!0,...c}),w}function ia(n,e,t={}){const s=aa(n),o=new Gi(s);return o.config=e,o.handlers=n,o.nativeRefs=t,Bn()&&!e.manual&&(pe(o.bind),en(o.clean)),o}function aa(n){const e=new Set;return n.drag&&e.add(ee.get("drag")),n.wheel&&e.add(ee.get("wheel")),n.scroll&&e.add(ee.get("scroll")),n.move&&e.add(ee.get("move")),n.pinch&&e.add(ee.get("pinch")),n.hover&&e.add(ee.get("hover")),e}class Ot extends We{constructor(){super(...arguments),this.ingKey="moving",this.stateKey="move",this.debounced=!0,this.onMove=e=>{this.enabled&&(this.setTimeout(this.onMoveEnd),this.state._active?this.onMoveChange(e):this.onMoveStart(e))},this.onMoveStart=e=>{this.updateSharedState(J(e));const t=fe(e,this.transform);this.updateGestureState({...ue(this,t,e),...F(this,e,!0)}),this.updateGestureState(this.getMovement(t)),this.fireGestureHandler()},this.onMoveChange=e=>{this.updateSharedState(J(e));const t=fe(e,this.transform);this.updateGestureState({...F(this,e),...this.getKinematics(t,e)}),this.fireGestureHandler()},this.onMoveEnd=()=>{if(this.clean(),!this.state._active)return;const e=this.state.values;this.updateGestureState(this.getMovement(e)),this.updateGestureState({velocities:[0,0],velocity:0,_active:!1}),this.fireGestureHandler()},this.hoverTransform=()=>this.controller.config.hover.transform||this.controller.config.transform,this.onPointerEnter=e=>{if(this.controller.state.shared.hovering=!0,!!this.controller.config.enabled){if(this.controller.config.hover.enabled){const t=fe(e,this.hoverTransform()),s={...this.controller.state.shared,...this.state,...F(this,e,!0),args:this.args,values:t,active:!0,hovering:!0};this.controller.handlers.hover({...s,...this.mapStateValues(s)})}"move"in this.controller.handlers&&this.onMoveStart(e)}},this.onPointerLeave=e=>{if(this.controller.state.shared.hovering=!1,"move"in this.controller.handlers&&this.onMoveEnd(),!this.controller.config.hover.enabled)return;const t=fe(e,this.hoverTransform()),s={...this.controller.state.shared,...this.state,...F(this,e),args:this.args,values:t,active:!1};this.controller.handlers.hover({...s,...this.mapStateValues(s)})}}addBindings(e){"move"in this.controller.handlers&&K(e,"onPointerMove",this.onMove),"hover"in this.controller.handlers&&(K(e,"onPointerEnter",this.onPointerEnter),K(e,"onPointerLeave",this.onPointerLeave))}}class ra extends bn{getInternalMovement(e,t){const s=t.values[1];let[o,l=s]=e,i=l-s,c=t.turns;return Math.abs(i)>270&&(c+=Oe(i)),ht([o,l-360*c],t.initial)}getKinematics(e,t){const s=this.getMovement(e),o=(e[1]-s._movement[1]-this.state.initial[1])/360,l=t.timeStamp-this.state.timeStamp,{distance:i,velocity:c,...h}=yn(s.movement,s.delta,l);return{turns:o,...s,...h}}mapStateValues(e){return{da:e.values,vdva:e.velocities}}}const la=7,ca=260;class ua extends ra{constructor(){super(...arguments),this.ingKey="pinching",this.stateKey="pinch",this.onPinchStart=e=>{mn(this.controller,e);const t=this.controller.touchIds;if(!this.enabled||this.state._active&&this.state._pointerIds.every(i=>t.has(i))||t.size<2)return;const s=Array.from(t).slice(0,2),{values:o,origin:l}=Tt(e,s,this.transform);this.updateSharedState(J(e)),this.updateGestureState({...ue(this,o,e),...F(this,e,!0),_pointerIds:s,cancel:this.onCancel,origin:l}),this.updateGestureState(this.getMovement(o)),this.fireGestureHandler()},this.onPinchChange=e=>{const{canceled:t,_active:s}=this.state;if(t||!s||e.timeStamp===this.state.timeStamp)return;const o=J(e);this.updateSharedState(o);try{const{values:l,origin:i}=Tt(e,this.state._pointerIds,this.transform),c=this.getKinematics(l,e);this.updateGestureState({...F(this,e),...c,origin:i}),this.fireGestureHandler()}catch{this.onPinchEnd(e)}},this.onPinchEnd=e=>{pn(this.controller,e);const t=dt(e);this.state._pointerIds.every(s=>!t.includes(s))||(this.clean(),this.state._active&&(this.updateGestureState({...F(this,e),...this.getMovement(this.state.values),_active:!1}),this.fireGestureHandler()))},this.onCancel=()=>{this.state.canceled||(this.updateGestureState({_active:!1,canceled:!0}),this.fireGestureHandler())},this.onGestureStart=e=>{if(!this.enabled)return;e.preventDefault();const t=Pt(e,this.transform);this.updateSharedState(J(e)),this.updateGestureState({...ue(this,t,e),...F(this,e,!0),origin:[e.clientX,e.clientY],cancel:this.onCancel}),this.updateGestureState(this.getMovement(t)),this.fireGestureHandler()},this.onGestureChange=e=>{const{canceled:t,_active:s}=this.state;if(t||!s)return;e.preventDefault();const o=J(e);this.updateSharedState(o);const l=Pt(e,this.transform);l[0]=(l[0]-this.state.event.scale)*ca+this.state.values[0];const i=this.getKinematics(l,e);this.updateGestureState({...F(this,e),...i,origin:[e.clientX,e.clientY]}),this.fireGestureHandler()},this.onGestureEnd=e=>{this.clean(),this.state._active&&(this.updateGestureState({...F(this,e),...this.getMovement(this.state.values),_active:!1,origin:[e.clientX,e.clientY]}),this.fireGestureHandler())},this.wheelShouldRun=e=>this.enabled&&e.ctrlKey,this.getWheelValuesFromEvent=e=>{const[,t]=un(e,this.transform),{values:[s,o]}=this.state;return{values:[s-t*la,o!==void 0?o:0],origin:[e.clientX,e.clientY],delta:[0,t]}},this.onWheel=e=>{this.wheelShouldRun(e)&&(this.setTimeout(this.onWheelEnd),this.state._active?this.onWheelChange(e):this.onWheelStart(e))},this.onWheelStart=e=>{const{values:t,delta:s,origin:o}=this.getWheelValuesFromEvent(e);e.cancelable&&e.preventDefault(),this.updateSharedState(J(e)),this.updateGestureState({...ue(this,t,e),...F(this,e,!0),initial:this.state.values,offset:t,delta:s,origin:o}),this.updateGestureState(this.getMovement(t)),this.fireGestureHandler()},this.onWheelChange=e=>{e.cancelable&&e.preventDefault(),this.updateSharedState(J(e));const{values:t,origin:s,delta:o}=this.getWheelValuesFromEvent(e);this.updateGestureState({...F(this,e),...this.getKinematics(t,e),origin:s,delta:o}),this.fireGestureHandler()},this.onWheelEnd=()=>{this.clean(),this.state._active&&(this.state._active=!1,this.updateGestureState(this.getMovement(this.state.values)),this.fireGestureHandler())}}addBindings(e){this.controller.config.domTarget&&!this.controller.supportsTouchEvents&&this.controller.supportsGestureEvents?(K(e,"onGestureStart",this.onGestureStart),K(e,"onGestureChange",this.onGestureChange),K(e,"onGestureEnd",this.onGestureEnd)):(K(e,"onTouchStart",this.onPinchStart),K(e,"onTouchMove",this.onPinchChange),K(e,"onTouchEnd",this.onPinchEnd),K(e,"onTouchCancel",this.onPinchEnd),K(e,"onWheel",this.onWheel))}}class da extends We{constructor(){super(...arguments),this.ingKey="scrolling",this.stateKey="scroll",this.debounced=!0,this.handleEvent=e=>{if(!this.enabled)return;this.clearTimeout(),this.setTimeout(this.onEnd);const t=Vi(e,this.transform);if(this.updateSharedState(J(e)),this.state._active)this.updateGestureState({...F(this,e),...this.getKinematics(t,e)});else{this.updateGestureState({...ue(this,t,e),...F(this,e,!0),initial:this.state.values});const s=this.getMovement(t),o=_n(s.delta);this.updateGestureState(s),this.updateGestureState(o)}this.fireGestureHandler()},this.onEnd=()=>{this.clean(),this.state._active&&(this.updateGestureState({...this.getMovement(this.state.values),_active:!1,velocities:[0,0],velocity:0}),this.fireGestureHandler())}}addBindings(e){K(e,"onScroll",this.handleEvent)}}class ha extends We{constructor(){super(...arguments),this.ingKey="wheeling",this.stateKey="wheel",this.debounced=!0,this.handleEvent=e=>{if(e.ctrlKey&&"pinch"in this.controller.handlers||!this.enabled)return;this.setTimeout(this.onEnd),this.updateSharedState(J(e));const t=Le(un(e,this.transform),this.state.values);if(this.state._active)this.updateGestureState({...F(this,e),...this.getKinematics(t,e)});else{this.updateGestureState({...ue(this,t,e),...F(this,e,!0),initial:this.state.values});const s=this.getMovement(t),o=_n(s.delta);this.updateGestureState(s),this.updateGestureState(o)}this.fireGestureHandler()},this.onEnd=()=>{if(this.clean(),!this.state._active)return;const e=this.getMovement(this.state.values);this.updateGestureState(e),this.updateGestureState({_active:!1,velocities:[0,0],velocity:0}),this.fireGestureHandler()}}addBindings(e){K(e,"onWheel",this.handleEvent)}}const fa=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function ma(n){const e={},t={},s=new Set;for(let o in n)fa.test(o)?(s.add(RegExp.lastMatch),t[o]=n[o]):e[o]=n[o];return[t,e,s]}function pa(n,e){const[t,s,o]=ma(n);ee.set("drag",Wi),ee.set("hover",Ot),ee.set("move",Ot),ee.set("pinch",ua),ee.set("scroll",da),ee.set("wheel",ha);const l=oa(e,o),i={};return o.has("onDrag")&&(i.drag=ye(t,"onDrag")),o.has("onWheel")&&(i.wheel=ye(t,"onWheel")),o.has("onScroll")&&(i.scroll=ye(t,"onScroll")),o.has("onMove")&&(i.move=ye(t,"onMove")),o.has("onPinch")&&(i.pinch=ye(t,"onPinch")),o.has("onHover")&&(i.hover=t.onHover),ia(i,l,s)}function ye(n,e){const t=e+"Start",s=e+"End";return l=>{let i;return l.first&&t in n&&n[t](l),e in n&&(i=n[e](l)),l.last&&s in n&&n[s](l),i}}const wn=1/60*1e3,va=typeof performance<"u"?()=>performance.now():()=>Date.now(),$n=typeof window<"u"?n=>window.requestAnimationFrame(n):n=>setTimeout(()=>n(va()),wn);function ga(n){let e=[],t=[],s=0,o=!1,l=!1;const i=new WeakSet,c={schedule:(h,v=!1,g=!1)=>{const m=g&&o,b=m?e:t;return v&&i.add(h),b.indexOf(h)===-1&&(b.push(h),m&&o&&(s=e.length)),h},cancel:h=>{const v=t.indexOf(h);v!==-1&&t.splice(v,1),i.delete(h)},process:h=>{if(o){l=!0;return}if(o=!0,[e,t]=[t,e],t.length=0,s=e.length,s)for(let v=0;v<s;v++){const g=e[v];g(h),i.has(g)&&(c.schedule(g),n())}o=!1,l&&(l=!1,c.process(h))}};return c}const _a=40;let at=!0,$e=!1,rt=!1;const ke={delta:0,timestamp:0},Me=["read","update","preRender","render","postRender"],Fe=Me.reduce((n,e)=>(n[e]=ga(()=>$e=!0),n),{});Me.reduce((n,e)=>{const t=Fe[e];return n[e]=(s,o=!1,l=!1)=>($e||ba(),t.schedule(s,o,l)),n},{});Me.reduce((n,e)=>(n[e]=Fe[e].cancel,n),{});Me.reduce((n,e)=>(n[e]=()=>Fe[e].process(ke),n),{});const ya=n=>Fe[n].process(ke),xn=n=>{$e=!1,ke.delta=at?wn:Math.max(Math.min(n-ke.timestamp,_a),1),ke.timestamp=n,rt=!0,Me.forEach(ya),rt=!1,$e&&(at=!1,$n(xn))},ba=()=>{$e=!0,at=!0,rt||$n(xn)},ka=["","X","Y","Z"],wa=["perspective","translate","scale","rotate","skew"],Sn=["transformPerspective","x","y","z"];wa.forEach(n=>{ka.forEach(e=>{const t=n+e;Sn.push(t)})});new Set(Sn);function $a(n={}){return Wn("(prefers-reduced-motion: reduce)",n)}const xa=["src","alt"],Ge=20,Sa=250,Ca=H({__name:"ModalMediaPreviewCarousel",props:vt({media:{default:[]}},{modelValue:{required:!0}}),emits:vt(["close"],["update:modelValue"]),setup(n,{emit:e}){const t=Yt(n,"modelValue"),s=E(),o=E(),l=E(),i=E(),c=$a(),h=Fn(350),v=W(()=>h.value&&!c.value),g=E(1),m=E(0),b=E(0),w=E(!1),x=E(!1),M=E(1),P=W(()=>g.value>1);function V(){g.value=1,m.value=l.value[t.value].offsetLeft*g.value,b.value=0}pe(()=>{const T=Ge/s.value.clientWidth;M.value=1-T,V()}),ct(t,V);let G=[0,0],S=0;pa({onPinch({first:T,initial:[I],movement:[B],da:[q],origin:j,touches:oe}){x.value=!0,T?S=g.value:oe===0?C(S,B,j):y(S,I,q,j),G=j},onPinchEnd(){x.value=!1,w.value=!1,P.value||V()},onDrag({movement:T,delta:I,pinching:B,tap:q,last:j,swipe:oe,event:ce,xy:Te}){ce.preventDefault(),!B&&(j?N(q,oe,T,Te):ae(I,T))}},{domTarget:s,eventOptions:{passive:!1}});const k=W(()=>{const T=i.value[t.value],I=l.value[t.value],q=T.offsetWidth*g.value/2-s.value.clientWidth/2+Ge,j=Math.max(0,q/g.value),ce=T.offsetHeight*g.value/2-s.value.clientHeight/2+Ge,Te=Math.max(0,ce/g.value);return{left:I.offsetLeft-j,right:I.offsetLeft+j,top:I.offsetTop-Te,bottom:I.offsetTop+Te}});function y(T,I,B,[q,j]){g.value=T*(B/I),g.value=Math.max(M.value,g.value);const oe=q-G[0],ce=j-G[1];le([oe,ce])}function C(T,I,[B,q]){g.value=T+I/1e3,g.value=Math.max(M.value,g.value);const j=G[0]-B,oe=G[1]-q;le([j,oe])}function N(T,I,B,q){w.value=!1,T?_(q):I[0]||I[1]?U(I,B):P.value||Z()}let ie=0;function _([T,I]){const B=Date.now(),q=B-ie<Sa;if(ie=B,!!q)if(P.value)V();else{const j=l.value[t.value].getBoundingClientRect(),oe=j.left+j.width/2,ce=j.top+j.height/2;g.value=3,m.value+=T-oe,b.value+=I-ce,ne()}}function U([T,I],[B,q]){if(P.value||x.value)return;Math.abs(B)>=Math.abs(q)?(T===1&&(t.value=Math.max(0,t.value-1)),T===-1&&(t.value=Math.min(n.media.length-1,t.value+1))):(I===1||I===-1)&&e("close"),V()}function Z(){const T=l.value[t.value].offsetLeft*g.value,I=l.value[t.value].offsetWidth*g.value;m.value>T+I/2?t.value=Math.min(n.media.length-1,t.value+1):m.value<T-I/2&&(t.value=Math.max(0,t.value-1)),V()}function ae(T,I){w.value=!0,P.value?le(T):ve(I)}function le([T,I]){m.value-=T/g.value,b.value-=I/g.value,ne()}function ve([T,I]){V(),Math.abs(I)>Math.abs(T)?b.value-=I/g.value:m.value-=T/g.value,n.media.length===1&&(m.value=0)}function ne(){m.value=Math.min(k.value.right,Math.max(k.value.left,m.value)),b.value=Math.min(k.value.bottom,Math.max(k.value.top,b.value))}const je=W(()=>{const T={transform:`scale(${g.value}) translate(${-m.value}px, ${-b.value}px)`,transition:"none",gap:`${Ge}px`};return v.value&&!w.value&&!x.value&&(T.transition="all 0.3s ease"),T}),se=W(()=>({cursor:w.value?"grabbing":"grab"}));return(T,I)=>(u(),d("div",{ref_key:"view",ref:s,flex:"","flex-row":"","h-full":"","w-full":"","overflow-hidden":""},[a("div",{ref_key:"slider",ref:o,style:Ue(r(je)),"w-full":"","h-full":"",flex:"","items-center":""},[(u(!0),d(A,null,X(T.media,B=>(u(),d("div",{key:B.id,ref_for:!0,ref_key:"slide",ref:l,"flex-shrink-0":"","w-full":"","h-full":"",flex:"","items-center":"","justify-center":""},[a("img",{ref_for:!0,ref_key:"image",ref:i,"select-none":"","max-w-full":"","max-h-full":"",style:Ue(r(se)),draggable:!1,src:B.url||B.previewUrl,alt:B.description||""},null,12,xa)]))),128))],4)],512))}}),Da=["aria-label","title"],Ma=a("div",{"i-ri:arrow-right-s-line":"","text-white":""},null,-1),Ta=[Ma],Ea=["title"],Ia=a("div",{"i-ri:arrow-left-s-line":"","text-white":""},null,-1),Pa=[Ia],Aa={flex:"~ col center","h-full":"","w-full":""},Va={bg:"black/30","dark:bg":"white/10","mb-6":"","mt-4":"","text-white":"","rounded-full":"",flex:"~ center shrink-0","overflow-hidden":""},Ga={key:0,p:"y-1 x-3","rounded-r-0":"","shrink-0":""},Ua=["title"],Ha={absolute:"","top-0":"","w-full":"",flex:"","justify-end":""},La=a("div",{"i-ri:close-line":"","text-white":""},null,-1),Oa=[La],Ka=H({__name:"ModalMediaPreview",emits:["close"],setup(n,{emit:e}){const t=jn(document.body),s=gt,o=W(()=>ge.value[gt.value]),l=W(()=>s.value<ge.value.length-1),i=W(()=>s.value>0),c=Yn();_t(c.arrowLeft,v),_t(c.arrowRight,h);function h(){l.value&&s.value++}function v(){i.value&&s.value--}function g(m){m.composedPath().find(x=>["A","BUTTON","IMG","VIDEO","P"].includes(x.tagName?.toUpperCase()))||e("close")}return pe(()=>t.value=!0),en(()=>t.value=!1),(m,b)=>{const w=Ca;return u(),d("div",{relative:"","h-full":"","w-full":"",flex:"","pt-12":"","w-100vh":"",onClick:g},[r(l)?(u(),d("button",{key:0,"pointer-events-auto":"","btn-action-icon":"",bg:"black/20","aria-label":m.$t("action.previous"),"hover:bg":"black/40","dark:bg":"white/30","dark-hover:bg":"white/20",absolute:"",top:"1/2","right-1":"",z5:"",title:m.$t("action.next"),onClick:h},Ta,8,Da)):D("",!0),r(i)?(u(),d("button",{key:1,"pointer-events-auto":"","btn-action-icon":"",bg:"black/20","aria-label":"action.next","hover:bg":"black/40","dark:bg":"white/30","dark:hover-bg":"white/20",absolute:"",top:"1/2","left-1":"",z5:"",title:m.$t("action.prev"),onClick:v},Pa,8,Ea)):D("",!0),a("div",Aa,[p(w,{modelValue:r(s),"onUpdate:modelValue":b[0]||(b[0]=x=>O(s)?s.value=x:null),media:"mediaPreviewList"in m?m.mediaPreviewList:r(ge),onClose:b[1]||(b[1]=x=>e("close"))},null,8,["modelValue","media"]),a("div",Va,[("mediaPreviewList"in m?m.mediaPreviewList:r(ge)).length>1?(u(),d("div",Ga,f(r(s)+1)+" / "+f(("mediaPreviewList"in m?m.mediaPreviewList:r(ge)).length),1)):D("",!0),r(o).description?(u(),d("p",{key:1,bg:"dark/30","dark:bg":"white/10",p:"y-1 x-3","rounded-ie-full":"","line-clamp-1":"","ws-pre-wrap":"","break-all":"",title:r(o).description,"w-full":""},f(r(o).description),9,Ua)):D("",!0)])]),a("div",Ha,[a("button",{"btn-action-icon":"",bg:"black/30","aria-label":"action.close","hover:bg":"black/40","dark:bg":"white/30","dark:hover-bg":"white/20","pointer-events-auto":"","shrink-0":"",onClick:b[2]||(b[2]=x=>e("close"))},Oa)])])}}}),Na={px3:"","py-4":"",flex:"~ col"},Ra={"text-center":"",flex:"~ row gap-1 wrap"},za=a("div",{h1px:"",bg:"gray/20",my2:""},null,-1),Ba=H({__name:"StatusEditPreview",props:{edit:{}},setup(n){return(e,t)=>{const s=Cs,o=Ds,l=Ms,i=Ts;return u(),d("div",Na,[a("div",Ra,[p(s,{account:e.edit.account},null,8,["account"]),a("span",null,f(e.$t("status_history.edited",[("useFormattedDateTime"in e?e.useFormattedDateTime:r(qn))(e.edit.createdAt).value])),1)]),za,p(i,{enabled:e.edit.sensitive},{spoiler:$(()=>[L(f(e.edit.spoilerText),1)]),default:$(()=>[p(o,{status:e.edit},null,8,["status"]),e.edit.mediaAttachments.length?(u(),R(l,{key:0,status:e.edit},null,8,["status"])):D("",!0)]),_:1},8,["enabled"])])}}}),Wa={class:"flex items-center px-1"},Fa={key:0,class:"inline-block px-.5"},ja={class:"p-1 grid place-items-center rounded-lg shadow-sm",text:"xs secondary",border:"1 base"},Ya={key:0,"i-material-symbols:keyboard-return-rounded":""},qa={key:1,"i-material-symbols:keyboard-command-key":""},Xa={key:2,"i-material-symbols:window-sharp":""},Za={key:3,"i-material-symbols:keyboard-option-key-rounded":""},Qa={key:4,"i-ri:arrow-up-line":""},Ja={key:5,"i-ri:arrow-down-line":""},er={key:6,"i-ri:arrow-left-line":""},tr={key:7,"i-ri:arrow-right-line":""},Cn=H({__name:"CommandKey",props:{name:{}},setup(n){const e=n,t=Be(),s=W(()=>e.name.toLowerCase().split("+"));return(o,l)=>(u(),d("div",Wa,[(u(!0),d(A,null,X(s.value,(i,c)=>(u(),d(A,{key:i},[c>0?(u(),d("div",Fa," + ")):D("",!0),a("div",ja,[i==="enter"?(u(),d("div",Ya)):i==="meta"&&r(t)?(u(),d("div",qa)):i==="meta"&&!r(t)?(u(),d("div",Xa)):i==="alt"&&r(t)?(u(),d("div",Za)):i==="arrowup"?(u(),d("div",Qa)):i==="arrowdown"?(u(),d("div",Ja)):i==="arrowleft"?(u(),d("div",er)):i==="arrowright"?(u(),d("div",tr)):i==="escape"?(u(),d(A,{key:8},[L(" ESC ")],64)):(u(),d("div",{key:9,class:z({"px-.5":i.length===1})},f(i[0].toUpperCase()+i.slice(1)),3))])],64))),128))]))}}),nr=["data-index"],sr={class:"flex-1 flex items-baseline gap-2"},or={key:0,class:"text-xs text-secondary"},ir={class:"text-xs text-secondary"},ar={class:"text-xs text-secondary"},rr=H({__name:"CommandItem",props:{cmd:{},index:{},active:{type:Boolean,default:!1}},emits:["activate"],setup(n,{emit:e}){return(t,s)=>{const o=Cn;return u(),d("div",{class:z(["flex px-3 py-2 my-1 items-center rounded-lg hover:bg-active transition-all duration-65 ease-in-out cursor-pointer scroll-m-10",{"bg-active":t.active}]),"data-index":t.index,onClick:s[0]||(s[0]=l=>e("activate"))},[t.cmd.icon?(u(),d("div",{key:0,"me-2":"",class:z(t.cmd.icon)},null,2)):D("",!0),a("div",sr,[a("div",{class:z({"font-medium":t.active})},f(t.cmd.name),3),t.cmd.description?(u(),d("div",or,f(t.cmd.description),1)):D("",!0)]),t.cmd.onComplete?(u(),d("div",{key:1,class:z(["flex items-center gap-1 transition-all duration-65 ease-in-out",t.active?"opacity-100":"opacity-0"])},[a("div",ir,f(t.$t("command.complete")),1),p(o,{name:"Tab"})],2)):D("",!0),t.cmd.onActivate?(u(),d("div",{key:2,class:z(["flex items-center gap-1 transition-all duration-65 ease-in-out",t.active?"opacity-100":"opacity-0"])},[a("div",ar,f(t.$t("command.activate")),1),p(o,{name:"Enter"})],2)):D("",!0)],10,nr)}}}),lr={class:"flex flex-col w-50vw max-w-180 h-50vh max-h-120"},cr={class:"flex mx-3 my-1 items-center"},ur=a("div",{"mx-1":"","i-ri:search-line":""},null,-1),dr={class:"text-sm"},hr=a("span",{class:"text-secondary"},"/",-1),fr=a("div",{class:"w-full border-b-1 border-base"},null,-1),mr={class:"mt-2 px-2 py-1 text-sm text-secondary"},pr={key:2,p5:"","text-center":"","text-secondary":"",italic:""},vr=a("div",{class:"w-full border-b-1 border-base"},null,-1),gr={class:"flex items-center px-3 py-1 text-xs"},_r=a("div",{"i-ri:lightbulb-flash-line":""},null,-1),yr=H({__name:"CommandPanel",emits:["close"],setup(n,{emit:e}){const t=Xn(),s=Ne(),o=E(),l=E(),i=E([]);let c=Zn;pe(()=>{o.value?.focus()});const h=W(()=>c.value.startsWith(">")),v=W(()=>h.value?"":c.value.trim()),{accounts:g,hashtags:m,loading:b}=bs(v);function w(_){return{index:0,type:"search",search:_,onActivate:()=>s.push(_.to)}}const x=W(()=>{if(v.value.length===0||b.value)return{length:0,items:[],grouped:{}};const _=m.value.slice(0,3).map(w),U=g.value.map(w),Z=new Map;Z.set("Hashtags",_),Z.set("Users",U);let ae=0;for(const le of Z.values())for(const ve of le)ve.index=ae++;return{grouped:Z,items:[..._,...U],length:_.length+U.length}}),M=W(()=>h.value?t.query(i.value.map(_=>_.id).join("."),c.value.slice(1).trim()):x.value),P=Be(),V=W(()=>P.value?"⌘":"Ctrl");let G=E(0);ct(M,(_,U)=>{(_.length!==U.length||!_.items.every((Z,ae)=>Z===U.items[ae]))&&(G.value=0)});function S(_){return l.value?.querySelector(`[data-index="${_}"]`)}function k(_){_.onActivate?(_.onActivate(),e("close")):_.onComplete&&(i.value.push(_.onComplete()),c.value="> ")}function y(_){_.onComplete?(i.value.push(_.onComplete()),c.value="> "):_.onActivate&&(_.onActivate(),e("close"))}function C(_){const U=S(_);U&&U.scrollIntoView({block:"nearest"})}function N(_){const U=M.value.length;G.value=(_+U)%U,C(G.value)}function ie(_){switch(_.key){case"p":case"ArrowUp":{if(_.key==="p"&&!_.ctrlKey)break;_.preventDefault(),N(G.value-1);break}case"n":case"ArrowDown":{if(_.key==="n"&&!_.ctrlKey)break;_.preventDefault(),N(G.value+1);break}case"Home":{_.preventDefault(),G.value=0,C(G.value);break}case"End":{_.preventDefault(),N(M.value.length-1);break}case"Enter":{_.preventDefault();const U=M.value.items[G.value];U&&k(U);break}case"Tab":{_.preventDefault();const U=M.value.items[G.value];U&&y(U);break}case"Backspace":{c.value===">"&&i.value.length&&(_.preventDefault(),i.value.pop());break}}}return(_,U)=>{const Z=Cn,ae=ks,le=ws,ve=rr;return u(),d("div",lr,[a("label",cr,[ur,(u(!0),d(A,null,X(i.value,ne=>(u(),d("div",{key:ne.id,class:"flex items-center mx-1 gap-2"},[a("div",dr,f(ne.display),1),hr]))),128)),Q(a("input",{ref_key:"inputEl",ref:o,"onUpdate:modelValue":U[0]||(U[0]=ne=>O(c)?c.value=ne:c=ne),class:"focus:outline-none flex-1 p-2 rounded bg-base",placeholder:"Search",onKeydown:ie},null,544),[[ut,r(c)]]),p(Z,{name:"Escape"})]),fr,a("div",{ref_key:"resultEl",ref:l,class:"flex-1 mx-1 overflow-y-auto"},[r(b)?(u(),d(A,{key:0},[p(ae),p(ae),p(ae)],64)):M.value.length?(u(!0),d(A,{key:1},X(M.value.grouped,([ne,je])=>(u(),d(A,{key:ne},[a("div",mr,f(ne),1),(u(!0),d(A,null,X(je,se=>(u(),d(A,{key:se.index},[se.type==="search"?(u(),R(le,{key:0,active:r(G)===se.index,result:se.search},null,8,["active","result"])):(u(),R(ve,{key:1,index:se.index,cmd:se.cmd,active:r(G)===se.index,onActivate:T=>k(se)},null,8,["index","cmd","active","onActivate"]))],64))),128))],64))),128)):(u(),d("div",pr,f(r(c).trim().length?_.$t("common.not_found"):_.$t("search.search_desc")),1))],512),vr,a("div",gr,[_r,L(" Tip: Use "),p(Z,{name:`${V.value}+K`},null,8,["name"]),L(" to search, "),p(Z,{name:`${V.value}+/`},null,8,["name"]),L(" to activate command mode. ")])])}}}),br={flex:"~ col","gap-6":""},kr={"font-bold":"","text-lg":"","text-center":""},wr={key:0},$r={flex:"","justify-end":"","gap-2":""},xr=H({__name:"ModalConfirm",props:{title:{},description:{},confirm:{},cancel:{}},emits:["choice"],setup(n,{emit:e}){return(t,s)=>(u(),d("div",br,[a("div",kr,f(t.title),1),t.description?(u(),d("div",wr,f(t.description),1)):D("",!0),a("div",$r,[a("button",{"btn-text":"",onClick:s[0]||(s[0]=o=>e("choice","cancel"))},f(t.cancel||t.$t("confirm.common.cancel")),1),a("button",{"btn-solid":"",onClick:s[1]||(s[1]=o=>e("choice","confirm"))},f(t.confirm||t.$t("confirm.common.confirm")),1)])]))}}),Sr={flex:"~ col","gap-6":""},Cr={"font-bold":"","text-lg":"","text-center":""},Dr={flex:"~ col","gap-1":"","text-sm":"","pt-1":"","ps-2":"","pe-1":"","pb-2":"","text-red-600":"","dark:text-red-400":"",border:"~ base rounded red-600 dark:red-400"},Mr={"ps-2":"","sm:ps-1":""},Tr={flex:"","justify-end":"","gap-2":""},Er=H({__name:"ModalError",props:{title:{},messages:{},close:{}},setup(n){return(e,t)=>(u(),d("div",Sr,[a("div",Cr,f(e.title),1),a("div",Dr,[a("ol",Mr,[(u(!0),d(A,null,X(e.messages,(s,o)=>(u(),d("li",{key:o,flex:"~ col sm:row","gap-y-1":"","sm:gap-x-2":""},f(s),1))),128))])]),a("div",Tr,[a("button",{"btn-text":"",onClick:t[0]||(t[0]=s=>("closeErrorDialog"in e?e.closeErrorDialog:r(Qn))())},f(e.close),1)])]))}}),Ir={flex:"","w-full":"","items-center":"","lg:text-lg":"","of-x-auto":"","scrollbar-hide":""},Pr=["onClick"],Ar=H({__name:"StatusFavouritedBoostedBy",setup(n){const e=E("favourited-by"),t=tn(),s=Jn(t,"client");function o(){return s.value.v1.statuses[e.value==="favourited-by"?"listFavouritedBy":"listRebloggedBy"](es.value)}const l=W(()=>o());function i(){e.value="favourited-by"}function c(){e.value="boosted-by"}const{t:h}=nn(),v=[{name:"favourited-by",display:h("status.favourited_by"),onClick:i},{name:"boosted-by",display:h("status.boosted_by"),onClick:c}];return(g,m)=>{const b=Is;return u(),d(A,null,[a("div",Ir,[(u(),d(A,null,X(v,w=>a("div",{key:w.name,relative:"",flex:"","flex-auto":"","cursor-pointer":"","sm:px6":"",px2:"",rounded:"","transition-all":"",tabindex:"1","hover:bg-active":"","transition-100":"",onClick:w.onClick},[a("span",{"ws-nowrap":"",mxa:"","sm:px2":"","sm:py3":"","xl:pb4":"","xl:pt5":"",py2:"","text-center":"","border-b-3":"",class:z(w.name===r(e)?"border-primary op100 text-base":"border-transparent text-secondary-light hover:text-secondary op50")},f(w.display),3)],8,Pr)),64))]),(u(),R(b,{key:`paginator-${r(e)}`,paginator:l.value},null,8,["paginator"]))],64)}}}),Vr={"px-3":"","sm:px-5":"","py-2":"","sm:py-4":"","max-w-220":"",relative:"","max-h-screen":""},Gr=["aria-label"],Ur=a("div",{"i-ri:close-fill":""},null,-1),Hr=[Ur],Lr={"text-xl":"","font-700":"",mb3:""},Or={mb2:"",grid:"","grid-cols-1":"","md:grid-cols-3":"","gap-y-":"","md:gap-x-6":"","lg:gap-x-8":""},Kr={"font-700":"","my-2":"","text-lg":""},Nr={"mr-2":"","break-words":"","overflow-hidden":"","leading-4":"","h-full":"","inline-block":"","align-middle":""},Rr={key:0,mx1:"","text-sm":"",op80:""},zr={class:"px2 md:px1.5 lg:px2 lg:px2 py0 lg:py-0.5",rounded:"","bg-code":"",border:"px $c-border-code","shadow-sm":"",my1:"","font-mono":"","font-600":""},Br=H({__name:"MagickeysKeyboardShortcuts",emits:["close"],setup(n,{emit:e}){const{t}=nn(),s=Be(),o=W(()=>s.value?"⌘":"Ctrl"),l=[{name:t("magic_keys.groups.navigation.title"),items:[{description:t("magic_keys.groups.navigation.shortcut_help"),shortcut:{keys:["?"],isSequence:!1}},{description:t("magic_keys.groups.navigation.go_to_home"),shortcut:{keys:["g","h"],isSequence:!0}},{description:t("magic_keys.groups.navigation.go_to_notifications"),shortcut:{keys:["g","n"],isSequence:!0}}]},{name:t("magic_keys.groups.actions.title"),items:[{description:t("magic_keys.groups.actions.command_mode"),shortcut:{keys:[o.value,"/"],isSequence:!1}},{description:t("magic_keys.groups.actions.compose"),shortcut:{keys:["c"],isSequence:!1}},{description:t("magic_keys.groups.actions.favourite"),shortcut:{keys:["f"],isSequence:!1}},{description:t("magic_keys.groups.actions.boost"),shortcut:{keys:["b"],isSequence:!1}}]},{name:t("magic_keys.groups.media.title"),items:[]}];return(i,c)=>(u(),d("div",Vr,[a("button",{"btn-action-icon":"",absolute:"","top-1":"","sm:top-2":"","right-1":"","sm:right-2":"",m1:"","aria-label":i.$t("modals.aria_label_close"),onClick:c[0]||(c[0]=h=>e("close"))},Hr,8,Gr),a("h2",Lr,f(i.$t("magic_keys.dialog_header")),1),a("div",Or,[(u(),d(A,null,X(l,h=>a("div",{key:h.name},[a("h3",Kr,f(h.name),1),(u(!0),d(A,null,X(h.items,v=>(u(),d("div",{key:v.description,flex:"","my-1":"","lg:my-2":"","justify-between":"","place-items-center":"","max-w-full":"","text-base":""},[a("div",Nr,f(v.description),1),a("div",null,[(u(!0),d(A,null,X(v.shortcut.keys,(g,m)=>(u(),d(A,{key:m},[m!==0?(u(),d("span",Rr,f(v.shortcut.isSequence?i.$t("magic_keys.sequence_then"):"+"),1)):D("",!0),a("code",zr,f(g),1)],64))),128))])]))),128))])),64))])]))}}),Wr={"my-8":"","px-3":"","sm:px-8":"",flex:"~ col gap-4",relative:""},Fr={mxa:"","text-xl":""},jr={"text-primary":""},Yr=a("div",{"i-ri:close-line":""},null,-1),qr=[Yr],Xr={mxa:"","text-4xl":"",mb4:""},Zr={"text-xl":""},Qr={"pl-2":"",for:"dontlike","font-bold":""},Jr={"pl-6":""},el={"pl-2":"",for:"spam","font-bold":""},tl={"pl-6":""},nl={key:0},sl={"pl-2":"",for:"violation","font-bold":""},ol={key:0,"pl-6":"","pt-2":"","text-primary":"","font-bold":""},il={"pl-6":""},al=["id","value","disabled"],rl=["for"],ll={"pl-2":"",for:"other","font-bold":""},cl={"pl-6":""},ul={key:1},dl={"mt-8":"","mb-4":"","font-bold":""},hl=["placeholder"],fl={key:0},ml={"mt-8":"","mb-2":"","font-bold":""},pl={"pb-1":""},vl={"pl-2":"",for:"forward"},gl=["disabled"],_l={mxa:"","text-4xl":"",mb4:""},yl={"text-primary":"","font-bold":""},bl=["id","value"],kl=["for"],wl={mxa:"","text-4xl":"",mb4:""},$l={"text-xl":""},xl={key:0},Sl=a("br",null,null,-1),Cl={key:1},Dl=a("br",null,null,-1),Ml={key:2},Tl=a("br",null,null,-1),El=H({__name:"ReportModal",props:{account:{},status:{}},emits:["close"],async setup(n,{emit:e}){let t,s;const{client:o}=tn(),l=E("selectCategory"),i=E(([t,s]=ts(()=>o.value.v2.instance.fetch()),t=await t,s(),t).rules||[]),c=E(""),h=E([]),v=E(n.status?[n.status]:[]),g=E(n.status?[n.status.id]:[]),m=E(""),b=E(!1),w=E();M();function x(){l.value=c.value==="dontlike"?"furtherActions":"selectStatuses",k()}async function M(){if(n.status){const y=await o.value.v1.accounts.listStatuses(n.account.id,{maxId:n.status.id,limit:5}),C=await o.value.v1.accounts.listStatuses(n.account.id,{minId:n.status.id,limit:5});v.value=v.value.concat(y),v.value=v.value.concat(C)}else{const y=await o.value.v1.accounts.listStatuses(n.account.id,{limit:10});v.value=y}v.value.sort((y,C)=>new Date(C.createdAt).getTime()-new Date(y.createdAt).getTime())}async function P(){await o.value.v1.reports.create({accountId:n.account.id,statusIds:g.value,comment:m.value,forward:b.value,category:c.value==="spam"?"spam":c.value==="violation"?"violation":"other",ruleIds:c.value==="violation"?h.value:null}),l.value="furtherActions",k()}function V(){e("close"),ss(he(n.account).value,n.account)}function G(){e("close"),os(he(n.account).value,n.account)}function S(){e("close"),is(he(n.account).value,n.account)}function k(){w.value?.scrollIntoView()}return(y,C)=>{const N=ze("i18n-t"),ie=Es;return u(),d("div",Wr,[a("h2",Fr,[p(N,{keypath:r(c)==="dontlike"?"report.limiting":"report.reporting"},{default:$(()=>[a("b",jr,"@"+f(y.account.acct),1)]),_:1},8,["keypath"])]),a("button",{ref_key:"dismissButton",ref:w,"btn-action-icon":"",absolute:"","top--8":"","right-0":"",m1:"","aria-label":"Close",onClick:C[0]||(C[0]=_=>e("close"))},qr,512),r(l)==="selectCategory"?(u(),d(A,{key:0},[a("h1",Xr,f(y.status?y.$t("report.whats_wrong_post"):y.$t("report.whats_wrong_account")),1),a("p",Zr,f(y.$t("report.select_one")),1),a("div",null,[Q(a("input",{id:"dontlike","onUpdate:modelValue":C[1]||(C[1]=_=>O(c)?c.value=_:null),type:"radio",value:"dontlike"},null,512),[[Ie,r(c)]]),a("label",Qr,f(y.$t("report.dontlike")),1),a("p",Jr,f(y.$t("report.dontlike_desc")),1)]),a("div",null,[Q(a("input",{id:"spam","onUpdate:modelValue":C[2]||(C[2]=_=>O(c)?c.value=_:null),type:"radio",value:"spam"},null,512),[[Ie,r(c)]]),a("label",el,f(y.$t("report.spam")),1),a("p",tl,f(y.$t("report.spam_desc")),1)]),r(i).length>0?(u(),d("div",nl,[Q(a("input",{id:"violation","onUpdate:modelValue":C[3]||(C[3]=_=>O(c)?c.value=_:null),type:"radio",value:"violation"},null,512),[[Ie,r(c)]]),a("label",sl,f(y.$t("report.violation")),1),r(c)==="violation"?(u(),d("p",ol,f(y.$t("report.select_many")),1)):D("",!0),a("ul",il,[(u(!0),d(A,null,X(r(i),_=>(u(),d("li",{key:_.id,"pt-2":""},[Q(a("input",{id:_.id,"onUpdate:modelValue":C[4]||(C[4]=U=>O(h)?h.value=U:null),type:"checkbox",value:_.id,disabled:r(c)!=="violation"},null,8,al),[[Ye,r(h)]]),a("label",{"pl-2":"",for:_.id},f(_.text),9,rl)]))),128))])])):D("",!0),a("div",null,[Q(a("input",{id:"other","onUpdate:modelValue":C[5]||(C[5]=_=>O(c)?c.value=_:null),type:"radio",value:"other"},null,512),[[Ie,r(c)]]),a("label",ll,f(y.$t("report.other")),1),a("p",cl,f(y.$t("report.other_desc")),1)]),r(c)&&r(c)!=="dontlike"?(u(),d("div",ul,[a("h3",dl,f(y.$t("report.anything_else")),1),Q(a("textarea",{"onUpdate:modelValue":C[6]||(C[6]=_=>O(m)?m.value=_:null),"w-full":"","h-20":"","p-3":"",border:"",placeholder:y.$t("report.additional_comments")},null,8,hl),[[ut,r(m)]]),("getServerName"in y?y.getServerName:r(qe))(y.account)&&("getServerName"in y?y.getServerName:r(qe))(y.account)!==("currentServer"in y?y.currentServer:r(ns))?(u(),d("div",fl,[a("h3",ml,f(y.$t("report.another_server")),1),a("p",pl,f(y.$t("report.forward_question")),1),Q(a("input",{id:"forward","onUpdate:modelValue":C[7]||(C[7]=_=>O(b)?b.value=_:null),type:"checkbox",value:"rule.id"},null,512),[[Ye,r(b)]]),a("label",vl,[a("b",null,f(y.$t("report.forward",[("getServerName"in y?y.getServerName:r(qe))(y.account)])),1)])])):D("",!0)])):D("",!0),a("button",{"btn-solid":"",mxa:"","mt-10":"",disabled:!r(c)||r(c)==="violation"&&r(h).length<1,onClick:C[8]||(C[8]=_=>x())},f(y.$t("action.next")),9,gl)],64)):r(l)==="selectStatuses"?(u(),d(A,{key:1},[a("h1",_l,f(y.status?y.$t("report.select_posts_other"):y.$t("report.select_posts")),1),a("p",yl,f(y.$t("report.select_many")),1),a("table",null,[(u(!0),d(A,null,X(r(v),_=>(u(),d("tr",{key:_.id},[a("td",null,[Q(a("input",{id:_.id,"onUpdate:modelValue":C[9]||(C[9]=U=>O(g)?g.value=U:null),type:"checkbox",value:_.id},null,8,bl),[[Ye,r(g)]])]),a("td",null,[a("label",{for:_.id},[p(ie,{status:_,actions:!1,"pointer-events-none":""},null,8,["status"])],8,kl)])]))),128))]),a("button",{"btn-solid":"",mxa:"","mt-5":"",onClick:C[10]||(C[10]=_=>P())},f(y.$t("report.submit")),1)],64)):r(l)==="furtherActions"?(u(),d(A,{key:2},[a("h1",wl,f(r(c)==="dontlike"?y.$t("report.further_actions.limit.title"):y.$t("report.further_actions.report.title")),1),a("p",$l,f(r(c)==="dontlike"?y.$t("report.further_actions.limit.description"):y.$t("report.further_actions.report.description")),1),r(he)(y.account).value?.following?(u(),d("div",xl,[a("button",{"btn-outline":"",mxa:"","mt-4":"","mb-2":"",onClick:C[11]||(C[11]=_=>V())},[p(N,{keypath:"menu.unfollow_account"},{default:$(()=>[a("b",null,"@"+f(y.account.acct),1)]),_:1})]),Sl,L(" "+f(y.$t("report.unfollow_desc")),1)])):D("",!0),r(he)(y.account).value?.muting?D("",!0):(u(),d("div",Cl,[a("button",{"btn-outline":"",mxa:"","mt-4":"","mb-2":"",onClick:C[12]||(C[12]=_=>G())},[p(N,{keypath:"menu.mute_account"},{default:$(()=>[a("b",null,"@"+f(y.account.acct),1)]),_:1})]),Dl,L(" "+f(y.$t("report.mute_desc")),1)])),r(he)(y.account).value?.blocking?D("",!0):(u(),d("div",Ml,[a("button",{"btn-outline":"",mxa:"","mt-4":"","mb-2":"",onClick:C[13]||(C[13]=_=>S())},[p(N,{keypath:"menu.block_account"},{default:$(()=>[a("b",null,"@"+f(y.account.acct),1)]),_:1})]),Tl,L(" "+f(y.$t("report.block_desc")),1)])),a("button",{"btn-solid":"",mxa:"","mt-10":"",onClick:C[14]||(C[14]=_=>e("close"))},f(y.$t("action.done")),1)],64)):D("",!0)])}}});const Il=H({__name:"ModalContainer",setup(n){const e=Be();be("keydown",i=>{(i.key==="k"||i.key==="л")&&(e.value?i.metaKey:i.ctrlKey)&&(i.preventDefault(),yt(i.shiftKey)),(i.key==="/"||i.key===",")&&(e.value?i.metaKey:i.ctrlKey)&&(i.preventDefault(),yt(!0))});function t(i){Mt.value=i,Pe.value=!1}function s(){Mt.value=null}function o(i){hs.value=i,Ae.value=!1}function l(){Ve.value=!1}return(i,c)=>{const h=ki,v=xs,g=Pi,m=Ss,b=Ka,w=Ba,x=yr,M=xr,P=Er,V=Ar,G=Br,S=El;return("isHydrated"in i?i.isHydrated:r(Y))?(u(),d(A,{key:0},[p(v,{modelValue:r(Xe),"onUpdate:modelValue":c[0]||(c[0]=k=>O(Xe)?Xe.value=k:null),"py-4":"","px-8":"","max-w-125":""},{default:$(()=>[p(h)]),_:1},8,["modelValue"]),p(v,{modelValue:r(Ze),"onUpdate:modelValue":c[2]||(c[2]=k=>O(Ze)?Ze.value=k:null),"keep-alive":"","max-w-125":""},{default:$(()=>[p(g,{onClose:c[1]||(c[1]=k=>("closePreviewHelp"in i?i.closePreviewHelp:r(as))())})]),_:1},8,["modelValue"]),p(v,{modelValue:r(Pe),"onUpdate:modelValue":c[3]||(c[3]=k=>O(Pe)?Pe.value=k:null),"max-w-180":"",flex:"",onClose:s},{default:$(()=>[("dialogDraftKey"in i?i.dialogDraftKey:r(bt))?(u(),R(m,{key:0,"draft-key":"dialogDraftKey"in i?i.dialogDraftKey:r(bt),expanded:"","flex-1":"","w-0":"",onPublished:t},null,8,["draft-key"])):D("",!0)]),_:1},8,["modelValue"]),p(v,{"model-value":r(kt),"w-full":"","max-w-full":"","h-full":"","max-h-full":"","bg-transparent":"","border-0":"","shadow-none":"","onUpdate:modelValue":"closeMediaPreview"in i?i.closeMediaPreview:r(wt)},{default:$(()=>[r(kt)?(u(),R(b,{key:0,onClose:c[4]||(c[4]=k=>("closeMediaPreview"in i?i.closeMediaPreview:r(wt))())})):D("",!0)]),_:1},8,["model-value","onUpdate:modelValue"]),p(v,{modelValue:r(Qe),"onUpdate:modelValue":c[5]||(c[5]=k=>O(Qe)?Qe.value=k:null),"max-w-125":""},{default:$(()=>[("statusEdit"in i?i.statusEdit:r($t))?(u(),R(w,{key:0,edit:"statusEdit"in i?i.statusEdit:r($t)},null,8,["edit"])):D("",!0)]),_:1},8,["modelValue"]),p(v,{modelValue:r(Je),"onUpdate:modelValue":c[7]||(c[7]=k=>O(Je)?Je.value=k:null),"max-w-fit":"",flex:""},{default:$(()=>[p(x,{onClose:c[6]||(c[6]=k=>("closeCommandPanel"in i?i.closeCommandPanel:r(rs))())})]),_:1},8,["modelValue"]),p(v,{modelValue:r(Ae),"onUpdate:modelValue":c[8]||(c[8]=k=>O(Ae)?Ae.value=k:null),"py-4":"","px-8":"","max-w-125":""},{default:$(()=>[("confirmDialogLabel"in i?i.confirmDialogLabel:r(xt))?(u(),R(M,St({key:0},"confirmDialogLabel"in i?i.confirmDialogLabel:r(xt),{onChoice:o}),null,16)):D("",!0)]),_:1},8,["modelValue"]),p(v,{modelValue:r(et),"onUpdate:modelValue":c[9]||(c[9]=k=>O(et)?et.value=k:null),"py-4":"","px-8":"","max-w-125":""},{default:$(()=>[("errorDialogData"in i?i.errorDialogData:r(Ct))?(u(),R(P,ls(St({key:0},"errorDialogData"in i?i.errorDialogData:r(Ct))),null,16)):D("",!0)]),_:1},8,["modelValue"]),p(v,{modelValue:r(Ve),"onUpdate:modelValue":c[10]||(c[10]=k=>O(Ve)?Ve.value=k:null),"max-w-180":"",onClose:l},{default:$(()=>[p(V)]),_:1},8,["modelValue"]),p(v,{modelValue:r(tt),"onUpdate:modelValue":c[12]||(c[12]=k=>O(tt)?tt.value=k:null),"max-w-full":"","sm:max-w-140":"","md:max-w-170":"","lg:max-w-220":"","md:min-w-160":""},{default:$(()=>[p(G,{onClose:c[11]||(c[11]=k=>("closeKeyboardShortcuts"in i?i.closeKeyboardShortcuts:r(cs))())})]),_:1},8,["modelValue"]),p(v,{modelValue:r(nt),"onUpdate:modelValue":c[14]||(c[14]=k=>O(nt)?nt.value=k:null),"keep-alive":"","max-w-175":""},{default:$(()=>[("reportAccount"in i?i.reportAccount:r(Dt))?(u(),R(S,{key:0,account:"reportAccount"in i?i.reportAccount:r(Dt),status:"reportStatus"in i?i.reportStatus:r(us),onClose:c[13]||(c[13]=k=>("closeReportDialog"in i?i.closeReportDialog:r(ds))())},null,8,["account","status"])):D("",!0)]),_:1},8,["modelValue"])],64)):D("",!0)}}}),Pl=sn(Xo),Al=sn(vs),Vl=ps(()=>gs(()=>import("./CommonPreviewPrompt.23b8e4ac.js"),["./CommonPreviewPrompt.23b8e4ac.js","./entry.6470c283.js","./entry.fd1aa0b4.css"],import.meta.url).then(n=>n.default||n)),Gl=["data-mode"],Ul={flex:"","w-full":"",mxa:"","lg:max-w-80rem":"",class:"native:grid native:sm:grid-cols-[auto_1fr] native:lg:grid-cols-[auto_minmax(600px,2fr)_1fr]"},Hl={class:"native:w-auto w-1/8 md:w-1/6 lg:w-1/5 xl:w-1/4 zen-hide",hidden:"","sm:flex":"","justify-end":"","xl:me-4":"","native:me-0":"",relative:""},Ll={sticky:"","top-0":"","w-20":"","xl:w-100":"","h-100dvh":"",flex:"~ col","lt-xl-items-center":""},Ol={flex:"~ col","overflow-y-auto":"","justify-between":"","h-full":"","max-w-full":"","overflow-x-hidden":""},Kl=a("div",{"flex-auto":""},null,-1),Nl={key:0,flex:"","flex-col":"",sticky:"","bottom-0":"","bg-base":""},Rl={hidden:"","xl:block":""},zl={key:0,p6:"",pb8:"","w-full":""},Bl={hidden:"","xl-block":""},Wl={key:1,flex:"~","items-center":"","justify-between":""},Fl={"min-h":"[calc(100vh-3.5rem)]","sm:min-h-screen":""},jl={sticky:"","left-0":"","right-0":"","bottom-0":"","z-10":"","bg-base":"",pb:"[env(safe-area-inset-bottom)]",transition:"padding 20"},Yl={key:0,class:"hidden lg:w-1/5 xl:w-1/4 sm:none xl:block native:w-full zen-hide"},ql={sticky:"","top-0":"","h-100dvh":"",flex:"~ col","gap-2":"",py3:"","ms-2":""},Xl=a("div",{"flex-auto":""},null,-1),_c=H({__name:"default",setup(n){const e=fs(),t=lt(),s=W(()=>e.meta.wideLayout??!1),o=ms(it("experimentalUserPicker"),()=>Ft().value.length>1),l=it("grayscaleMode");return(i,c)=>{const h=Bs,v=an,g=uo,m=ko,b=_s,w=de,x=rn,M=xo,P=zo,V=$s,G=Pl,S=Al,k=Vl,y=oi,C=Il;return u(),d("div",{"h-full":"","data-mode":("isHydrated"in i?i.isHydrated:r(Y))&&r(l)?"grayscale":"","data-tauri-drag-region":""},[a("main",Ul,[a("aside",Hl,[a("div",Ll,[me(i.$slots,"left",{},()=>[a("div",Ol,[p(h),p(v,{command:""}),Kl,("isHydrated"in i?i.isHydrated:r(Y))?(u(),d("div",Nl,[a("div",Rl,[("currentUser"in i?i.currentUser:r(te))?D("",!0):(u(),R(g,{key:0}))]),("currentUser"in i?i.currentUser:r(te))?(u(),d("div",zl,[a("div",Bl,[r(o)?(u(),R(m,{key:0})):(u(),d("div",Wl,[p(w,{hidden:"","xl:block":"","rounded-3":"","text-primary":"","text-start":"","w-full":"","hover:bg-active":"","cursor-pointer":"","transition-100":"",to:("getAccountRoute"in i?i.getAccountRoute:r(jt))(("currentUser"in i?i.currentUser:r(te)).account)},{default:$(()=>[p(b,{account:("currentUser"in i?i.currentUser:r(te)).account,"md:break-words":"",square:""},null,8,["account"])]),_:1},8,["to"]),p(x)]))]),p(x,{"xl:hidden":""})])):D("",!0)])):D("",!0)])])])]),a("div",{"w-full":"","min-h-screen":"",class:z(("isHydrated"in i?i.isHydrated:r(Y))&&r(s)?"xl:w-full sm:w-600px":"sm:w-600px md:shrink-0"),"border-base":""},[a("div",Fl,[me(i.$slots,"default")]),a("div",jl,[("isHydrated"in i?i.isHydrated:r(Y))?(u(),R(M,{key:0})):D("",!0),("isHydrated"in i?i.isHydrated:r(Y))?(u(),R(P,{key:1,"sm:hidden":""})):D("",!0)])],2),("isHydrated"in i?i.isHydrated:r(Y))&&!r(s)?(u(),d("aside",Yl,[a("div",ql,[me(i.$slots,"right",{},()=>[p(V,{"mt-4":"","mx-1":"",hidden:"","xl:block":""}),Xl,p(G),p(S),r(t).env==="preview"?(u(),R(k,{key:0})):D("",!0),p(y)])])])):D("",!0)]),p(C)],8,Gl)}}});export{_c as default};
