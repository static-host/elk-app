import{_ as Ee}from"./AccountInlineInfo.vue.1d2999da.js";import{d as j,a as _,aX as et,a6 as Le,o as i,m as b,w as h,c as f,L as I,j as c,t as T,f as p,h as t,l as F,aY as tt,g as Ue,k,p as te,al as X,an as H,i as ge,ae as nt,ai as ot,a3 as M,a4 as Y,ap as at,O as st,aN as he,aQ as Ce,aZ as it,a2 as Fe,u as ke,aq as O,x as V,a_ as lt,a$ as ne,aF as Ae,a7 as He,B as _e,C as R,F as ut,q as L,b0 as W,b1 as ze,b2 as ee,b3 as rt,aw as $e,s as ct,b as Oe,S as we,T as dt,y as vt,U as mt,R as z,W as xe,X as Be,Y as Q,Z as pt,$ as Re,a0 as ft,a1 as Te,b4 as Pe,aV as pe,b5 as De,b6 as Ne,b7 as Se,G as gt,b8 as yt,b9 as bt,ba as Ve,bb as ht,bc as kt,bd as _t,aj as $t,be as Ke,aM as wt,aG as ye,M as be,bf as St,bg as Ge,bh as Ct,bi as At,bj as xt,a5 as Bt,bk as Rt,bl as J,bm as Tt,ax as Pt,a8 as Ie,bn as Me,ac as Dt,n as Nt,bo as It,ag as Mt,ah as jt}from"./entry.6470c283.js";import{s as Et,_ as qe}from"./Dropdown.vue.aa86e3bf.js";import{c as Lt}from"./CommonPaginator.vue.26cfe48c.js";import{_ as Ut}from"./StatusAttachment.vue.65a4200d.js";import{_ as Ft}from"./StatusPreviewCard.vue.01b2746b.js";const Ht=c("div",{"i-ri-discuss-line":"","text-blue":""},null,-1),zt=c("div",{"i-ri-chat-1-line":"","text-blue":""},null,-1),Ot={"ws-nowrap":"",flex:""},Vt=j({__name:"StatusReplyingTo",props:{status:{},isSelfReply:{type:Boolean,default:!1}},setup(s){const n=_(()=>s.status.inReplyToAccountId===s.status.account.id).value?_(()=>s.status.account):et(s.status.inReplyToAccountId);return(o,u)=>{const v=Ee,d=Le("i18n-t"),r=te;return o.status.inReplyToId?(i(),b(r,{key:0,flex:"~ gap2","items-center":"","h-auto":"","text-sm":"","text-secondary":"",to:("getStatusInReplyToRoute"in o?o.getStatusInReplyToRoute:t(tt))(o.status),title:o.$t("status.replying_to",[t(n)?("getDisplayName"in o?o.getDisplayName:t(Ue))(t(n)):o.$t("status.someone")]),"text-blue":"","saturate-50":"","hover:saturate-100":""},{default:h(()=>[o.isSelfReply?(i(),f(I,{key:0},[Ht,c("span",null,T(o.$t("status.show_full_thread")),1)],64)):(i(),f(I,{key:1},[zt,c("div",Ot,[p(d,{keypath:"status.replying_to"},{default:h(()=>[t(n)?(i(),b(v,{key:0,account:t(n),link:!1,"m-inline-2":""},null,8,["account"])):(i(),f(I,{key:1},[F(T(o.$t("status.someone")),1)],64))]),_:1})])],64))]),_:1},8,["to","title"])):k("",!0)}}}),Kt=j({__name:"StatusAccountDetails",props:{account:{},link:{type:Boolean,default:!0}},setup(s){const e=X();return(n,o)=>{const u=nt,v=ot,d=te;return i(),b(d,{to:n.link?("getAccountRoute"in n?n.getAccountRoute:t(ge))(n.account):void 0,flex:"~ col","min-w-0":"","md:flex":"~ row gap-2","md:items-center":"","text-link-rounded":""},{default:h(()=>[p(u,{account:n.account,"hide-emojis":("getPreferences"in n?n.getPreferences:t(H))(t(e),"hideUsernameEmojis"),"font-bold":"","line-clamp-1":"","ws-pre-wrap":"","break-all":""},null,8,["account","hide-emojis"]),p(v,{account:n.account,class:"zen-none"},null,8,["account"])]),_:1},8,["to"])}}}),Gt=["aria-label"],qt=j({__name:"StatusVisibilityIndicator",props:{status:{}},setup(s){const e=_(()=>Et.find(n=>n.value===s.status.visibility));return(n,o)=>{const u=Y;return i(),b(u,{content:n.$t(`visibility.${e.value.value}`),placement:"bottom"},{default:h(()=>[c("div",{class:M(e.value.icon),"aria-label":n.$t(`visibility.${e.value.value}`)},null,10,Gt)]),_:1},8,["content"])}}}),Wt={},Xt={class:"skeleton-loading-bg","h-5":"","w-full":"",rounded:"",my2:""};function Yt(s,e){return i(),f("div",Xt)}const Zt=at(Wt,[["render",Yt]]),Qt=c("span",null,null,-1),Jt=j({__name:"StatusEditHistory",props:{status:{}},setup(s){const e=st().v1.statuses.listHistory(s.status.id);function n(v){it(v)}const o=he();function u(v){return[...v].reverse()}return(v,d)=>{const r=Le("i18n-t"),a=Fe,y=Zt,B=Lt;return i(),b(B,{paginator:t(e),"key-prop":"createdAt",preprocess:u},{default:h(({items:g,item:S,index:N})=>[p(a,{px:"0.5",onClick:A=>n(S)},{default:h(()=>[F(T(("getDisplayName"in v?v.getDisplayName:t(Ue))(S.account))+" ",1),N===g.length-1?(i(),b(r,{key:0,keypath:"status_history.created"},{default:h(()=>[F(T(t(Ce)(new Date(S.createdAt),t(o))),1)]),_:2},1024)):(i(),b(r,{key:1,keypath:"status_history.edited"},{default:h(()=>[F(T(t(Ce)(new Date(S.createdAt),t(o))),1)]),_:2},1024))]),_:2},1032,["onClick"])]),loading:h(()=>[p(y),p(y,{op50:""}),p(y,{op25:""})]),done:h(()=>[Qt]),_:1},8,["paginator"])}}}),en=["title","datetime"],tn={"text-sm":"",p2:""},nn={"text-center":"",mb1:""},on=j({__name:"StatusEditIndicator",props:{status:{},inline:{type:Boolean}},setup(s){const e=_(()=>s.status.editedAt),n=ke(e);return(o,u)=>{const v=Y,d=Jt,r=qe;return t(e)?(i(),f(I,{key:0},[o.inline?(i(),b(v,{key:0,content:o.$t("status.edited",[t(n)])},{default:h(()=>[F("   "),c("time",{title:t(e),datetime:t(e),"font-bold":"",underline:"","decoration-dashed":"","text-secondary":""}," * ",8,en)]),_:1},8,["content"])):(i(),b(r,{key:1},{popper:h(()=>[c("div",tn,[c("div",nn,T(o.$t("status.edited",[t(n)])),1),p(d,{status:o.status},null,8,["status"])])]),default:h(()=>[O(o.$slots,"default")]),_:3}))],64)):k("",!0)}}}),an={"of-hidden":"",h:"1.25rem"},sn=j({__name:"AnimateNumber",props:{increased:{type:Boolean}},setup(s){return(e,n)=>(i(),f("div",an,[c("div",{flex:"~ col","transition-transform":"","duration-300":"",class:M(e.increased?"translate-y--1/2":"translate-y-0")},[O(e.$slots,"default"),O(e.$slots,"next")],2)]))}}),ln={"text-secondary-light":""},We=j({inheritAttrs:!1,__name:"StatusActionButton",props:{text:{},content:{},color:{},icon:{},activeIcon:{},inactiveIcon:{},hover:{},elkGroupHover:{},active:{type:Boolean},disabled:{type:Boolean},as:{default:"button"},command:{type:Boolean}},setup(s){const e=V();return lt({scope:"Actions",order:-2,visible:()=>s.command&&!s.disabled,name:()=>s.content,icon:()=>s.icon,onActivate(){if(!ne())return;const n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});e.value?.dispatchEvent(n)}}),(n,o)=>{const u=Y,v=sn;return i(),b(He(n.as),Ae(n.$attrs,{ref_key:"el",ref:e,"w-fit":"",flex:"","gap-1":"","items-center":"","transition-all":"","select-none":"",rounded:"",group:"",hover:n.disabled?void 0:n.hover,"focus:outline-none":"","focus-visible":n.hover,class:n.active?n.color:n.disabled?"op25 cursor-not-allowed":"text-secondary","aria-label":n.content,disabled:n.disabled,"aria-disabled":n.disabled}),{default:h(()=>[p(u,{placement:"bottom",content:n.content},{default:h(()=>[c("div",Ae({"rounded-full":"",p2:""},n.disabled?{}:{"elk-group-hover":n.elkGroupHover,"group-focus-visible":n.elkGroupHover,"group-focus-visible:ring":"2 current"}),[c("div",{class:M(n.active&&n.activeIcon?n.activeIcon:n.disabled&&n.inactiveIcon?n.inactiveIcon:n.icon)},null,2)],16)]),_:1},8,["content"]),n.text!==void 0||n.$slots.text?(i(),b(v,{key:0,increased:n.active,"text-sm":""},{next:h(()=>[c("span",{class:M([n.color])},[O(n.$slots,"text",{},()=>[F(T(n.text),1)])],2)]),default:h(()=>[c("span",ln,[O(n.$slots,"text",{},()=>[F(T(n.text),1)])])]),_:3},8,["increased"])):k("",!0)]),_:3},16,["hover","focus-visible","class","aria-label","disabled","aria-disabled"])}}});function Xe(s){let e=V({...s.status});const n=_e(),o=R(n,"client");ut(()=>s.status,S=>e.value={...S},{deep:!0,immediate:!0});const u=V({reblogged:!1,favourited:!1,bookmarked:!1,pinned:!1,translation:!1,muted:!1});async function v(S,N,A){if(!ne())return;const x=A?e.value[A]:void 0;u.value[S]=!0;const $=e.value[S];N().then(P=>{$&&A&&x===P[A]&&(P[A]-=1),Object.assign(e.value,P),W(P,void 0,!0)}).finally(()=>{u.value[S]=!1}),e.value[S]=!e.value[S],W(e.value,void 0,!0),A&&(e.value[A]+=e.value[S]?1:-1)}const d=_(()=>e.value.visibility!=="direct"&&(e.value.visibility!=="private"||e.value.account.id===L.value?.account.id));return{status:e,isLoading:u,canReblog:d,toggleMute:async()=>v("muted",()=>o.value.v1.statuses[e.value.muted?"unmute":"mute"](e.value.id)),toggleReblog:()=>v("reblogged",()=>o.value.v1.statuses[e.value.reblogged?"unreblog":"reblog"](e.value.id).then(S=>e.value.reblogged?S.reblog:S),"reblogsCount"),toggleFavourite:()=>v("favourited",()=>o.value.v1.statuses[e.value.favourited?"unfavourite":"favourite"](e.value.id),"favouritesCount"),toggleBookmark:()=>v("bookmarked",()=>o.value.v1.statuses[e.value.bookmarked?"unbookmark":"bookmark"](e.value.id)),togglePin:async()=>v("pinned",()=>o.value.v1.statuses[e.value.pinned?"unpin":"pin"](e.value.id))}}const un={flex:"~ col"},rn=j({__name:"StatusActionsMore",props:{status:{},details:{type:Boolean},command:{type:Boolean}},emits:["afterEdit"],setup(s,{emit:e}){const n=s,o=ze("focus-editor",ee),u=n,v=R(u,"details"),d=R(u,"command"),r=Xe(n),a=R(r,"status"),y=R(r,"isLoading"),B=R(r,"toggleBookmark"),g=R(r,"toggleFavourite"),S=R(r,"togglePin"),N=R(r,"toggleReblog"),A=R(r,"toggleMute"),x=rt(),$=$e(),P=ct(),{t:E}=Oe(),U=X(),w=we("useStarFavoriteIcon"),K=_(()=>a.value.account.id===L.value?.account.id),oe=_e(),Z=R(oe,"client");function G(l){const m=bt(l);return m?`${location.origin}/${m}`:null}async function q(l){const m=G(l);m&&await x.copy(m)}async function ae(l){const m=l.url;m&&await x.copy(m)}const{share:se,isSupported:ie}=dt();async function le(l){const m=G(l);m&&await se({url:m})}async function ue(){await Te({title:E("confirm.delete_posts.title"),confirm:E("confirm.delete_posts.confirm"),cancel:E("confirm.delete_posts.cancel")})==="confirm"&&(Pe(a.value.id),await Z.value.v1.statuses.remove(a.value.id),P.name==="status"&&$.back())}async function re(){await Te({title:E("confirm.delete_posts.title"),confirm:E("confirm.delete_posts.confirm"),cancel:E("confirm.delete_posts.cancel")})==="confirm"&&(Pe(a.value.id),await Z.value.v1.statuses.remove(a.value.id),await pe("dialog",await De(a.value),!0),Ne.value&&P.name==="status"&&$.push(Se(Ne.value)))}function ce(){if(ne())if(v.value)o();else{const{key:l,draft:m}=gt(a.value);pe(l,m())}}async function de(){await pe(`edit-${a.value.id}`,{...await De(a.value),editingStatus:a.value},!0),e("afterEdit")}function ve(){yt(a.value.id)}return(l,m)=>{const me=We,C=Fe,Qe=te,Je=qe;return i(),b(Je,{"flex-none":"",ms3:"",placement:"bottom","eager-mount":d.value},{popper:h(()=>[c("div",un,[("getPreferences"in l?l.getPreferences:t(H))(t(U),"zenMode")?(i(),f(I,{key:0},[p(C,{text:l.$t("action.reply"),icon:"i-ri:chat-1-line",command:d.value,onClick:m[0]||(m[0]=D=>ce())},null,8,["text","command"]),p(C,{text:a.value.reblogged?l.$t("action.boosted"):l.$t("action.boost"),icon:"i-ri:repeat-fill",class:M(a.value.reblogged?"text-green":""),command:d.value,disabled:y.value.reblogged,onClick:m[1]||(m[1]=D=>N.value())},null,8,["text","class","command","disabled"]),p(C,{text:a.value.favourited?l.$t("action.favourited"):l.$t("action.favourite"),icon:t(w)?a.value.favourited?"i-ri:star-fill":"i-ri:star-line":a.value.favourited?"i-ri:heart-3-fill":"i-ri:heart-3-line",class:M(a.value.favourited?t(w)?"text-yellow":"text-rose":""),command:d.value,disabled:y.value.favourited,onClick:m[2]||(m[2]=D=>g.value())},null,8,["text","icon","class","command","disabled"]),p(C,{text:a.value.bookmarked?l.$t("action.bookmarked"):l.$t("action.bookmark"),icon:a.value.bookmarked?"i-ri:bookmark-fill":"i-ri:bookmark-line",class:M(a.value.bookmarked?t(w)?"text-rose":"text-yellow":""),command:d.value,disabled:y.value.bookmarked,onClick:m[3]||(m[3]=D=>B.value())},null,8,["text","icon","class","command","disabled"])],64)):k("",!0),p(C,{text:l.$t("menu.show_favourited_and_boosted_by"),icon:"i-ri:hearts-line",command:d.value,onClick:m[4]||(m[4]=D=>ve())},null,8,["text","command"]),p(C,{text:l.$t("menu.copy_link_to_post"),icon:"i-ri:link",command:d.value,onClick:m[5]||(m[5]=D=>q(a.value))},null,8,["text","command"]),p(C,{text:l.$t("menu.copy_original_link_to_post"),icon:"i-ri:links-fill",command:d.value,onClick:m[6]||(m[6]=D=>ae(a.value))},null,8,["text","command"]),t(ie)?(i(),b(C,{key:1,text:l.$t("menu.share_post"),icon:"i-ri:share-line",command:d.value,onClick:m[7]||(m[7]=D=>le(a.value))},null,8,["text","command"])):k("",!0),("currentUser"in l?l.currentUser:t(L))&&(a.value.account.id===("currentUser"in l?l.currentUser:t(L)).account.id||a.value.mentions.some(D=>D.id===("currentUser"in l?l.currentUser:t(L)).account.id))?(i(),b(C,{key:2,text:a.value.muted?l.$t("menu.unmute_conversation"):l.$t("menu.mute_conversation"),icon:a.value.muted?"i-ri:eye-line":"i-ri:eye-off-line",command:d.value,disabled:y.value.muted,onClick:m[8]||(m[8]=D=>A.value())},null,8,["text","icon","command","disabled"])):k("",!0),a.value.url?(i(),b(Qe,{key:3,to:a.value.url,external:"",target:"_blank"},{default:h(()=>[p(C,{text:l.$t("menu.open_in_original_site"),icon:"i-ri:arrow-right-up-line",command:d.value},null,8,["text","command"])]),_:1},8,["to"])):k("",!0),("isHydrated"in l?l.isHydrated:t(vt))&&("currentUser"in l?l.currentUser:t(L))?(i(),f(I,{key:4},[K.value?(i(),f(I,{key:0},[p(C,{text:a.value.pinned?l.$t("menu.unpin_on_profile"):l.$t("menu.pin_on_profile"),icon:"i-ri:pushpin-line",command:d.value,onClick:S.value},null,8,["text","command","onClick"]),p(C,{text:l.$t("menu.edit"),icon:"i-ri:edit-line",command:d.value,onClick:de},null,8,["text","command"]),p(C,{text:l.$t("menu.delete"),icon:"i-ri:delete-bin-line","text-red-600":"",command:d.value,onClick:ue},null,8,["text","command"]),p(C,{text:l.$t("menu.delete_and_redraft"),icon:"i-ri:eraser-line","text-red-600":"",command:d.value,onClick:re},null,8,["text","command"])],64)):(i(),f(I,{key:1},[p(C,{text:l.$t("menu.mention_account",[`@${a.value.account.acct}`]),icon:"i-ri:at-line",command:d.value,onClick:m[9]||(m[9]=D=>("mentionUser"in l?l.mentionUser:t(mt))(a.value.account))},null,8,["text","command"]),t(z)(a.value.account).value?.muting?(i(),b(C,{key:1,text:l.$t("menu.unmute_account",[`@${a.value.account.acct}`]),icon:"i-ri:volume-up-fill",command:d.value,onClick:m[11]||(m[11]=D=>t(xe)(t(z)(a.value.account).value,a.value.account))},null,8,["text","command"])):(i(),b(C,{key:0,text:l.$t("menu.mute_account",[`@${a.value.account.acct}`]),icon:"i-ri:volume-mute-line",command:d.value,onClick:m[10]||(m[10]=D=>t(xe)(t(z)(a.value.account).value,a.value.account))},null,8,["text","command"])),t(z)(a.value.account).value?.blocking?(i(),b(C,{key:3,text:l.$t("menu.unblock_account",[`@${a.value.account.acct}`]),icon:"i-ri:checkbox-circle-line",command:d.value,onClick:m[13]||(m[13]=D=>t(Be)(t(z)(a.value.account).value,a.value.account))},null,8,["text","command"])):(i(),b(C,{key:2,text:l.$t("menu.block_account",[`@${a.value.account.acct}`]),icon:"i-ri:forbid-2-line",command:d.value,onClick:m[12]||(m[12]=D=>t(Be)(t(z)(a.value.account).value,a.value.account))},null,8,["text","command"])),("getServerName"in l?l.getServerName:t(Q))(a.value.account)&&("getServerName"in l?l.getServerName:t(Q))(a.value.account)!==("currentServer"in l?l.currentServer:t(pt))?(i(),f(I,{key:4},[t(z)(a.value.account).value?.domainBlocking?(i(),b(C,{key:1,text:l.$t("menu.unblock_domain",[("getServerName"in l?l.getServerName:t(Q))(a.value.account)]),icon:"i-ri:restart-line",command:d.value,onClick:m[15]||(m[15]=D=>("toggleBlockDomain"in l?l.toggleBlockDomain:t(Re))(t(z)(a.value.account).value,a.value.account))},null,8,["text","command"])):(i(),b(C,{key:0,text:l.$t("menu.block_domain",[("getServerName"in l?l.getServerName:t(Q))(a.value.account)]),icon:"i-ri:shut-down-line",command:d.value,onClick:m[14]||(m[14]=D=>("toggleBlockDomain"in l?l.toggleBlockDomain:t(Re))(t(z)(a.value.account).value,a.value.account))},null,8,["text","command"]))],64)):k("",!0),p(C,{text:l.$t("menu.report_account",[`@${a.value.account.acct}`]),icon:"i-ri:flag-2-line",command:d.value,onClick:m[16]||(m[16]=D=>("openReportDialog"in l?l.openReportDialog:t(ft))(a.value.account,a.value))},null,8,["text","command"])],64))],64)):k("",!0)])]),default:h(()=>[p(me,{content:l.$t("action.more"),color:"text-primary",hover:"text-primary","elk-group-hover":"bg-primary-light",icon:"i-ri:more-line","my--2":""},null,8,["content"])]),_:1},8,["eager-mount"])}}}),je=["ar","az","cs","da","de","el","en","eo","es","fa","fi","fr","ga","he","hi","hu","id","it","ja","ko","nl","pl","pt","ru","sk","sv","tr","uk","vi","zh"];function Ye(){let s="en";const e=n=>n.replace(/-.*$/,"");{const{locale:n}=Oe();s=e(n.value?n.value:navigator.language)}return s}async function cn(s,e,n){const o=ht(),u=V({success:!1,error:"",text:""});try{const v=await $fetch(o.public.translateApi,{method:"POST",body:{q:s,source:e??"auto",target:n,format:"html",api_key:""}});u.value.success=!0,u.value.text=v.translatedText}catch(v){v.data?.error?u.value.error=v.data.error:u.value.error="Unknown Error, Please check your console in browser devtool.",console.error("Translate Post Error: ",v)}return u.value}const fe=new WeakMap;function Ze(s,e){fe.has(s)||fe.set(s,Ve({visible:!1,text:"",success:!1,error:""}));const n=fe.get(s),o=X(),u="language"in s&&s.language&&s.language!==e&&je.includes(e)&&je.includes(s.language)&&!o.value.disabledTranslationLanguages.includes(s.language),v=u;async function d(){if(u){if(!n.text){const{success:r,text:a,error:y}=await cn(s.content,s.language,e);n.error=y,n.text=a,n.success=r}n.visible=!n.visible}}return{enabled:v,toggle:d,translation:n}}const dn=["lang"],vn={key:1},mn=c("div",{my2:"","h-px":"",border:"b base","bg-base":""},null,-1),pn={key:1,"text-red-4":""},fn=j({__name:"StatusBody",props:{status:{},newer:{},withAction:{type:Boolean,default:!0}},setup(s){const{translation:e}=Ze(s.status,Ye()),n=kt(()=>s.status.emojis),o=_(()=>s.status.content?_t(s.status.content,{emojis:n.value,mentions:"mentions"in s.status?s.status.mentions:void 0,markdown:!0,collapseMentionLink:!!("inReplyToId"in s.status&&s.status.inReplyToId),status:"id"in s.status?s.status:void 0,inReplyToStatus:s.newer}):null);return(u,v)=>{const d=$t;return i(),f("div",{class:M(["status-body",{"with-action":u.withAction}]),"whitespace-pre-wrap":"","break-words":"",relative:""},[u.status.content?(i(),f("span",{key:0,class:"content-rich line-compact",dir:"auto",lang:"language"in u.status&&u.status.language||void 0},[o.value?(i(),b(He(o.value),{key:0})):k("",!0)],8,dn)):(i(),f("div",vn)),t(e).visible?(i(),f(I,{key:2},[mn,t(e).success?(i(),b(d,{key:0,class:"line-compact",content:t(e).text,emojis:u.status.emojis},null,8,["content","emojis"])):(i(),f("div",pn," Error: "+T(t(e).error),1))],64)):k("",!0)],2)}}});const gn={key:0},yn=j({__name:"StatusTranslation",props:{status:{}},setup(s){const{toggle:e,translation:n,enabled:o}=Ze(s.status,Ye()),u=we("hideTranslation"),v=_(()=>!u.value&&o&&s.status.content.trim().length);return V(!1),(d,r)=>t(v)?(i(),f("div",gn)):k("",!0)}}),bn={flex:"","flex-col":"","w-full":"","items-stretch":"","gap-2":"",py3:"",dir:"auto",class:"poll-wrapper"},hn=["onSubmit"],kn=["value","type"],_n={"btn-solid":"","mt-1":""},$n={flex:"","justify-between":"","pb-2":"","w-full":""},wn={"inline-flex":"","align-items":""},Sn={key:0,"ms-2":"","mt-1":"","inline-block":"","i-ri:checkbox-circle-line":""},Cn={"text-primary-active":""},An=c("div",{class:"bg-gray/40","rounded-l-sm":"","rounded-r-lg":"","h-5px":"","w-full":""},[c("div",{"bg-primary-active":"","h-full":"","min-w":"1%",class:"w-[var(--bar-width)]"})],-1),xn={"text-sm":"",flex:"~ inline","gap-x-1":"","text-secondary":""},Bn=["datetime"],Rn=j({__name:"StatusPoll",props:{status:{}},setup(s){const e=Ve({...s.status.poll});function n(g){return`${(100*g).toFixed(1).replace(/\.?0+$/,"")}%`}const o=he(),u=Ke(e.expiresAt,o),v=ke(e.expiresAt),{formatPercentage:d}=wt(),r=_e(),a=R(r,"client");async function y(g){const N=new FormData(g.target).getAll("choices").map(A=>+A);for(const[A,x]of e.options.entries())N.includes(A)&&(x.votesCount=(x.votesCount||0)+1);e.voted=!0,e.votesCount++,!e.votersCount&&e.votesCount?e.votesCount=e.votesCount+1:e.votersCount=(e.votersCount||0)+1,W({...s.status,poll:e},void 0,!0),await a.value.v1.polls.vote(e.id,{choices:N})}const B=_(()=>e.votersCount??e.votesCount??0);return(g,S)=>{const N=Ge,A=Y;return i(),f("div",bn,[!t(e).voted&&!t(e).expired?(i(),f("form",{key:0,flex:"~ col gap3","accent-primary":"",onClick:S[0]||(S[0]=ye((...x)=>("noop"in g?g.noop:t(ee))&&("noop"in g?g.noop:t(ee))(...x),["stop"])),onSubmit:ye(y,["prevent"])},[(i(!0),f(I,null,be(t(e).options,(x,$)=>(i(),f("label",{key:$,flex:"~ gap2","items-center":""},[c("input",{name:"choices",value:$,type:t(e).multiple?"checkbox":"radio","cursor-pointer":""},null,8,kn),F(" "+T(x.title),1)]))),128)),c("button",_n,T(g.$t("action.vote")),1)],40,hn)):(i(!0),f(I,{key:1},be(t(e).options,(x,$)=>(i(),f("div",{key:$,"py-1":"",relative:"",style:St({"--bar-width":n(B.value===0?0:(x.votesCount??0)/B.value)})},[c("div",$n,[c("span",wn,[F(T(x.title)+" ",1),t(e).voted&&t(e).ownVotes?.includes($)?(i(),f("span",Sn)):k("",!0)]),c("span",Cn,T(t(d)(B.value>0?(x.votesCount||0)/B.value:0)),1)]),An],4))),128)),c("div",xn,[p(N,{keypath:"status.poll.count",count:t(e).votesCount},null,8,["count"]),F(" · "),t(e).expiresAt?(i(),b(A,{key:0,content:t(v),class:"inline-block",placement:"right"},{default:h(()=>[c("time",{datetime:t(e).expiresAt},T(g.$t(t(e).expired?"status.poll.finished":"status.poll.ends",[t(u)])),9,Bn)]),_:1},8,["content"])):k("",!0)])])}}}),Tn=j({__name:"StatusMedia",props:{status:{},fullSize:{type:Boolean},isPreview:{type:Boolean,default:!1}},setup(s){return(e,n)=>{const o=Ut;return i(),f("div",{class:M(["status-media-container",`status-media-container-${e.status.mediaAttachments.length}`])},[(i(!0),f(I,null,be(e.status.mediaAttachments,u=>(i(),b(o,{key:u.id,attachment:u,attachments:e.status.mediaAttachments,"full-size":e.fullSize,"w-full":"","h-full":"","is-preview":e.isPreview},null,8,["attachment","attachments","full-size","is-preview"]))),128))],2)}}});const Pn={key:0,flex:"","flex-col":"","items-start":""},Dn={class:"content-rich",p:"x-4 b-2.5","text-center":"","text-secondary":"","w-full":"",border:"~ base","border-0":"","border-b-dotted":"","border-b-3":"","mt-2":""},Nn=["mb"],In=["bg","aria-expanded"],Mn={key:0,"i-ri:eye-line":""},jn={key:1,"i-ri:eye-close-line":""},En=j({__name:"StatusSpoiler",props:{enabled:{type:Boolean},filter:{type:Boolean},isDM:{type:Boolean},sensitiveNonSpoiler:{type:Boolean}},setup(s){const e=s,n=_(()=>{const r=L.value?Ct(L.value.account):!1,a=L.value?At(L.value.account):!1;return!e.filter&&(e.sensitiveNonSpoiler&&a||!e.sensitiveNonSpoiler&&r)}),o=e.enabled||e.sensitiveNonSpoiler,u=V(n.value?!0:!o),v=xt(u);Bt(()=>{u.value=n.value?!0:!o});function d(){return e.sensitiveNonSpoiler?"status.spoiler_media_hidden":e.filter?"status.filter_show_anyway":"status.spoiler_show_more"}return(r,a)=>(i(),f(I,null,[t(o)?(i(),f("div",Pn,[c("div",Dn,[O(r.$slots,"spoiler")]),c("div",{flex:"~ gap-1 center","w-full":"",mb:r.isDM&&!t(u)?"4":"",mt:"-4.5"},[c("button",{"btn-text":"","px-2":"","py-1":"",bg:r.isDM?"transparent":"base",flex:"~ center gap-2",class:M(t(u)?"":"filter-saturate-0 hover:filter-saturate-100"),"aria-expanded":t(u),onClick:a[0]||(a[0]=y=>t(v)())},[t(u)?(i(),f("div",Mn)):(i(),f("div",jn)),F(" "+T(t(u)?r.$t("status.spoiler_show_less"):r.$t(d())),1)],10,In)],8,Nn)])):k("",!0),!t(o)||t(u)?O(r.$slots,"default",{key:1}):k("",!0)],64))}}),Ln={key:5},Un=j({__name:"StatusContent",props:{status:{},newer:{},context:{},isPreview:{type:Boolean},inNotification:{type:Boolean}},setup(s){const e=_(()=>s.status.visibility==="direct"),n=_(()=>s.context==="details"),o=_(()=>s.status.filtered?.length?s.status.filtered[0]:null),u=_(()=>o.value?.filter),v=_(()=>u.value?.title),d=_(()=>s.status.account.id!==L.value?.account.id&&v.value&&s.context&&s.context!=="details"&&!!u.value?.context.includes(s.context)),r=_(()=>!!s.status.spoilerText&&s.status.spoilerText.trim().length>0),a=_(()=>r.value||s.status.sensitive&&!!s.status.mediaAttachments.length),y=_(()=>s.status.sensitive&&!s.status.spoilerText&&!!s.status.mediaAttachments.length),B=_(()=>L.value?Rt(L.value.account)&&!!s.status.mediaAttachments.length:!1);return(g,S)=>{const N=fn,A=yn,x=Rn,$=Tn,P=Ft,E=$o,U=En;return i(),f("div",{"space-y-3":"",class:M({"pt2 pb0.5 px3.5 bg-dm rounded-4 me--1":e.value,"ms--3.5 mt--1 ms--1":e.value&&g.context!=="details"})},[!d.value&&t(y)||t(B)?(i(),b(N,{key:0,status:g.status,newer:g.newer,"with-action":!n.value,class:M(n.value?"text-xl":"")},null,8,["status","newer","with-action","class"])):k("",!0),p(U,{enabled:a.value||d.value,filter:d.value,"sensitive-non-spoiler":t(y)||t(B),"is-d-m":e.value},J({default:h(()=>[t(y)||t(B)?k("",!0):(i(),b(N,{key:0,status:g.status,newer:g.newer,"with-action":!n.value,class:M(n.value?"text-xl":"")},null,8,["status","newer","with-action","class"])),p(A,{status:g.status},null,8,["status"]),g.status.poll?(i(),b(x,{key:1,status:g.status},null,8,["status"])):k("",!0),g.status.mediaAttachments?.length?(i(),b($,{key:2,status:g.status,"is-preview":g.isPreview},null,8,["status","is-preview"])):k("",!0),g.status.card?(i(),b(P,{key:3,card:g.status.card,"small-picture-only":g.status.mediaAttachments?.length>0},null,8,["card","small-picture-only"])):k("",!0),g.status.reblog?(i(),b(E,{key:4,status:g.status.reblog,border:"~ rounded",actions:!1},null,8,["status"])):k("",!0),e.value?(i(),f("div",Ln)):k("",!0)]),_:2},[r.value?{name:"spoiler",fn:h(()=>[c("p",null,T(g.status.spoilerText),1)]),key:"0"}:v.value?{name:"spoiler",fn:h(()=>[c("p",null,T(`${g.$t("status.filter_hidden_phrase")}: ${v.value}`),1)]),key:"1"}:void 0]),1032,["enabled","filter","sensitive-non-spoiler","is-d-m"])],2)}}}),Fn={flex:"","justify-between":"","items-center":"",class:"status-actions"},Hn={"flex-1":""},zn={"flex-1":""},On={"flex-1":""},Vn={"flex-none":""},Kn=j({__name:"StatusActions",props:{status:{},details:{type:Boolean},command:{type:Boolean}},setup(s){const e=s,n=ze("focus-editor",ee),o=e,u=R(o,"details"),v=R(o,"command"),d=X(),r=we("useStarFavoriteIcon"),a=Xe(e),y=R(a,"status"),B=R(a,"isLoading"),g=R(a,"canReblog"),S=R(a,"toggleBookmark"),N=R(a,"toggleFavourite"),A=R(a,"toggleReblog");function x(){ne()&&(u.value?n():Tt({status:y.value,focusReply:!0}))}return($,P)=>{const E=Ge,U=We;return i(),f("div",Fn,[c("div",Hn,[p(U,{content:$.$t("action.reply"),text:!("getPreferences"in $?$.getPreferences:t(H))(t(d),"hideReplyCount")&&y.value.repliesCount||"",color:"text-blue",hover:"text-blue","elk-group-hover":"bg-blue/10",icon:"i-ri:chat-1-line",command:v.value,onClick:x},J({_:2},[y.value.repliesCount&&!("getPreferences"in $?$.getPreferences:t(H))(t(d),"hideReplyCount")?{name:"text",fn:h(()=>[p(E,{keypath:"action.reply_count",count:y.value.repliesCount},null,8,["count"])]),key:"0"}:void 0]),1032,["content","text","command"])]),c("div",zn,[p(U,{content:$.$t("action.boost"),text:!("getPreferences"in $?$.getPreferences:t(H))(t(d),"hideBoostCount")&&y.value.reblogsCount?y.value.reblogsCount:"",color:"text-green",hover:"text-green","elk-group-hover":"bg-green/10",icon:"i-ri:repeat-line","active-icon":"i-ri:repeat-fill","inactive-icon":"i-tabler:repeat-off",active:!!y.value.reblogged,disabled:B.value.reblogged||!g.value,command:v.value,onClick:P[0]||(P[0]=w=>A.value())},J({_:2},[y.value.reblogsCount&&!("getPreferences"in $?$.getPreferences:t(H))(t(d),"hideBoostCount")?{name:"text",fn:h(()=>[p(E,{keypath:"action.boost_count",count:y.value.reblogsCount},null,8,["count"])]),key:"0"}:void 0]),1032,["content","text","active","disabled","command"])]),c("div",On,[p(U,{content:$.$t("action.favourite"),text:!("getPreferences"in $?$.getPreferences:t(H))(t(d),"hideFavoriteCount")&&y.value.favouritesCount?y.value.favouritesCount:"",color:t(r)?"text-yellow":"text-rose",hover:t(r)?"text-yellow":"text-rose","elk-group-hover":t(r)?"bg-yellow/10":"bg-rose/10",icon:t(r)?"i-ri:star-line":"i-ri:heart-3-line","active-icon":t(r)?"i-ri:star-fill":"i-ri:heart-3-fill",active:!!y.value.favourited,disabled:B.value.favourited,command:v.value,onClick:P[1]||(P[1]=w=>N.value())},J({_:2},[y.value.favouritesCount&&!("getPreferences"in $?$.getPreferences:t(H))(t(d),"hideFavoriteCount")?{name:"text",fn:h(()=>[p(E,{keypath:"action.favourite_count",count:y.value.favouritesCount},null,8,["count"])]),key:"0"}:void 0]),1032,["content","text","color","hover","elk-group-hover","icon","active-icon","active","disabled","command"])]),c("div",Vn,[p(U,{content:$.$t("action.bookmark"),color:t(r)?"text-rose":"text-yellow",hover:t(r)?"text-rose":"text-yellow","elk-group-hover":t(r)?"bg-rose/10":"bg-yellow/10",icon:"i-ri:bookmark-line","active-icon":"i-ri:bookmark-fill",active:!!y.value.bookmarked,disabled:B.value.bookmarked,command:v.value,onClick:P[2]||(P[2]=w=>S.value())},null,8,["content","color","hover","elk-group-hover","active","disabled","command"])])])}}}),Gn=["id","lang","onKeydown"],qn=j({__name:"StatusLink",props:{status:{},hover:{type:Boolean}},setup(s){const e=s,n=V(),o=$e(),u=_(()=>Se(e.status));function v(r){const y=r.composedPath().find(g=>["A","BUTTON","IMG","VIDEO"].includes(g.tagName?.toUpperCase())),B=window.getSelection()?.toString();!y&&!B&&d(r)}function d(r){r.metaKey||r.ctrlKey?window.open(u.value.href):(W(e.status),o.push(u.value))}return(r,a)=>(i(),f("div",{id:`status-${r.status.id}`,ref_key:"el",ref:n,relative:"",flex:"~ col gap1",p:"b-2 is-3 ie-4",class:M({"hover:bg-active":r.hover}),tabindex:"0","focus:outline-none":"","focus-visible:ring":"2 primary","aria-roledescription":"status-card",lang:r.status.language??void 0,onClick:v,onKeydown:Pt(v,["enter"])},[O(r.$slots,"default")],42,Gn))}}),Wn=["h"],Xn={flex:"~ col gap-1","items-center":"",pos:"absolute top-0 inset-is-0",w:"77px","z--1":""},Yn=c("div",{w:"1px",h:"0.5",border:"x base","mt-3":""},null,-1),Zn=c("div",{w:"1px",h:"0.5",border:"x base"},null,-1),Qn=c("div",{w:"1px",h:"0.5",border:"x base"},null,-1),Jn=c("div",{w:"1px","h-10":"",border:"x base"},null,-1),eo={flex:"~ col","justify-between":""},to={key:0,flex:"~","items-center":"",p:"t-1 b-0.5 x-1px",relative:"","text-secondary":"","ws-nowrap":""},no=c("div",{"i-ri:repeat-fill":"","me-46px":"","text-green":"","w-16px":"","h-16px":"",class:"status-boosted"},null,-1),oo={absolute:"","top-1":"","ms-24px":"","w-32px":"","h-32px":"","rounded-full":""},ao={key:0,flex:"~col 1","min-w-0":""},so={italic:""},io=c("div",{"i-ri:eye-line":""},null,-1),lo={relative:""},uo={key:0,absolute:"",flex:"","items-center":"","justify-center":"","top--6px":"","px-2px":"","py-3px":"","rounded-full":"","bg-base":""},ro=c("div",{"i-ri:repeat-fill":"","text-green":"","w-16px":"","h-16px":""},null,-1),co=[ro],vo={key:1,"w-full":"","h-full":"",flex:"","mt--3px":"","justify-center":""},mo=c("div",{"w-1px":"",border:"x base","mb-9":""},null,-1),po=[mo],fo={flex:"~ col 1","min-w-0":""},go={flex:"","items-center":"","space-x-1":""},yo=c("div",{"flex-auto":""},null,-1),bo={"text-sm":"","text-secondary":"",flex:"~ row nowrap","hover:underline":"","whitespace-nowrap":""},ho={flex:"~ gap1","items-center":""},ko={flex:""},_o=["datetime"],$o=j({__name:"StatusCard",props:{status:{},actions:{type:Boolean,default:!0},context:{},hover:{type:Boolean},inNotification:{type:Boolean},isPreview:{type:Boolean},older:{},newer:{},hasOlder:{type:Boolean},hasNewer:{type:Boolean},main:{}},setup(s){const e=s,n=X(),o=_(()=>e.status.reblog&&(!e.status.content||e.status.content===e.status.reblog.content)?e.status.reblog:e.status),u=_(()=>e.hasNewer||!!o.value.inReplyToId&&(o.value.inReplyToId===e.newer?.id||o.value.inReplyToId===e.newer?.reblog?.id)),v=_(()=>e.hasOlder||o.value.id===e.older?.inReplyToId||o.value.id===e.older?.reblog?.inReplyToId),d=_(()=>e.main&&e.main.id===o.value.inReplyToId),r=_(()=>e.status.reblog?e.status.account:null),a=_(()=>Se(o.value)),y=$e();function B(w){w.metaKey||w.ctrlKey?window.open(a.value.href):(W(o.value),y.push(a.value))}const g=ke(o.value.createdAt),S=he(!0),N=Ke(()=>o.value.createdAt,S),A=_(()=>o.value.inReplyToAccountId===o.value.account.id),x=_(()=>r.value?.id===o.value.account.id),$=_(()=>o.value.visibility==="direct"),P=_(()=>e.newer&&!u.value),E=_(()=>!d.value&&!u.value),U=V(!1);return(w,K)=>{const oe=Vt,Z=Dt,G=te,q=Nt,ae=Ee,se=It,ie=Kt,le=Mt,ue=jt,re=qt,ce=Y,de=on,ve=rn,l=Un,m=Kn,me=qn;return i(),b(me,{status:o.value,hover:w.hover},{default:h(()=>[c("div",{h:P.value?"1px":"0","w-auto":"","bg-border":"","mb-1":""},null,8,Wn),O(w.$slots,"meta",{},()=>[o.value.inReplyToAccountId?(i(),f(I,{key:0},[E.value?(i(),b(oe,{key:0,m:"is-5",p:"t-1 is-5",status:o.value,"is-self-reply":A.value,class:M(w.inNotification?"text-secondary-light":"")},null,8,["status","is-self-reply","class"])):k("",!0),c("div",Xn,[E.value?(i(),f(I,{key:0},[Yn,Zn,Qn],64)):k("",!0),Jn])],64)):k("",!0),c("div",eo,[r.value&&!x.value?(i(),f("div",to,[no,c("div",oo,[p(q,{account:r.value},{default:h(()=>[p(G,{to:("getAccountRoute"in w?w.getAccountRoute:t(ge))(r.value)},{default:h(()=>[p(Z,{account:r.value},null,8,["account"])]),_:1},8,["to"])]),_:1},8,["account"])]),p(ae,{"font-bold":"",account:r.value,avatar:!1,"text-sm":""},null,8,["account"])])):k("",!0)])]),c("div",{flex:"","gap-3":"",class:M({"text-secondary":w.inNotification})},[o.value.account.suspended&&!t(U)?(i(),f("div",ao,[c("p",so,T(w.$t("status.account.suspended_message")),1),c("div",null,[c("button",{"p-0":"",flex:"~ center","gap-2":"","text-sm":"","btn-text":"",onClick:K[0]||(K[0]=C=>U.value=!0)},[io,c("span",null,T(w.$t("status.account.suspended_show")),1)])])])):(i(),f(I,{key:1},[c("div",lo,[x.value?(i(),f("div",uo,co)):k("",!0),p(q,{account:o.value.account},{default:h(()=>[p(G,{to:("getAccountRoute"in w?w.getAccountRoute:t(ge))(o.value.account),"rounded-full":""},{default:h(()=>[p(se,{account:o.value.account},null,8,["account"])]),_:1},8,["to"])]),_:1},8,["account"]),v.value?(i(),f("div",vo,po)):k("",!0)]),c("div",fo,[c("div",go,[p(q,{account:o.value.account},{default:h(()=>[p(ie,{account:o.value.account},null,8,["account"])]),_:1},8,["account"]),yo,Ie(c("div",bo,[o.value.account.locked?(i(),b(le,{key:0,"me-2":""})):k("",!0),o.value.account.bot?(i(),b(ue,{key:1,"me-2":""})):k("",!0),c("div",ho,[o.value.visibility!=="public"?(i(),b(re,{key:0,status:o.value},null,8,["status"])):k("",!0),c("div",ko,[p(ce,{content:t(g),"no-auto-focus":""},{default:h(()=>[p(G,{title:o.value.createdAt,href:a.value.href,onClick:K[1]||(K[1]=ye(C=>B(C),["prevent"]))},{default:h(()=>[c("time",{"text-sm":"","ws-nowrap":"","hover:underline":"",datetime:o.value.createdAt},T(t(N)),9,_o)]),_:1},8,["title","href"])]),_:1},8,["content"]),p(de,{status:o.value,inline:""},null,8,["status"])])])],512),[[Me,!("getPreferences"in w?w.getPreferences:t(H))(t(n),"zenMode")]]),w.actions!==!1?(i(),b(ve,{key:0,status:o.value,"me--2":""},null,8,["status"])):k("",!0)]),p(l,{status:o.value,newer:w.newer,context:w.context,"is-preview":w.isPreview,"in-notification":w.inNotification,mb2:"",class:M({"mt-2 mb1":$.value})},null,8,["status","newer","context","is-preview","in-notification","class"]),w.actions!==!1?Ie((i(),b(m,{key:0,status:o.value},null,8,["status"])),[[Me,!("getPreferences"in w?w.getPreferences:t(H))(t(n),"zenMode")]]):k("",!0)])],64))],2)]),_:3},8,["status","hover"])}}});export{rn as _,Un as a,on as b,qt as c,Kn as d,$o as e,fn as f,Tn as g,Rn as h,qn as i,En as j};
