import{d as L,o,c as g,j as c,f as i,l as H,t as A,w as p,h as n,i as Y,_ as fe,p as E,R as q,P as ne,b as O,B as W,C as M,S as ge,T as _e,m as d,k as w,q as he,L as I,U as be,V as $e,W as Z,X as Q,Y as V,Z as ye,$ as X,a0 as ke,a1 as we,a2 as Ne,x as F,N as te,a3 as D,a4 as oe,u as Ae,a as z,a5 as Ce,F as Re,a6 as je,a7 as Se,a8 as De,a9 as Ie,aa as Ue,M as G,ab as K,ac as Be,ad as Me,ae as Fe,af as Le,ag as Pe,ah as He,ai as Te,aj as ae,ak as Ve,s as xe,v as ze,al as Ee,H as qe,I as Oe,am as We,z as Je,Q as Ye,g as Ze,an as Qe,ao as Xe}from"./entry.6470c283.js";import{_ as Ge}from"./AccountInlineInfo.vue.1d2999da.js";import{_ as Ke,g as ee}from"./Dropdown.vue.aa86e3bf.js";import{c as en}from"./CommonPaginator.vue.26cfe48c.js";import{_ as nn}from"./CommonNotFound.7245bde1.js";import{u as tn}from"./asyncData.d016a388.js";const on={flex:"~ col gap-2",p4:""},an={flex:"~ gap-1","justify-center":""},cn={flex:""},sn=c("div",{"flex-auto":""},null,-1),ln={flex:"","items-center":""},un=L({__name:"AccountMoved",props:{account:{}},setup(l){return(r,s)=>{const h=Ge,b=fe,u=E;return o(),g("div",on,[c("div",an,[i(h,{account:r.account,link:!1},null,8,["account"]),H(" "+A(r.$t("account.moved_title")),1)]),c("div",cn,[i(u,{to:("getAccountRoute"in r?r.getAccountRoute:n(Y))(r.account.moved)},{default:p(()=>[i(b,{account:r.account.moved},null,8,["account"])]),_:1},8,["to"]),sn,c("div",ln,[i(u,{to:("getAccountRoute"in r?r.getAccountRoute:n(Y))(r.account.moved),"btn-solid":"","inline-block":"","h-fit":""},{default:p(()=>[H(A(r.$t("account.go_to_profile")),1)]),_:1},8,["to"])])])])}}}),rn=c("button",{flex:"","gap-1":"","items-center":"","w-full":"",rounded:"",op75:"",hover:"op100 text-purple",group:"","aria-label":"More actions"},[c("div",{"rounded-5":"",p2:"","elk-group-hover":"bg-purple/10"},[c("div",{"i-ri:more-2-fill":""})])],-1),mn=L({__name:"AccountMoreButton",props:{account:{},command:{type:Boolean}},emits:["addNote","removeNote"],setup(l,{emit:r}){let s=q(l.account);const h=ne(()=>l.account),{t:b}=O(),u=W(),$=M(u,"client"),v=ge("useStarFavoriteIcon"),{share:S,isSupported:f}=_e();function C(){S({url:location.href})}async function R(){if(!s.value.showingReblogs&&await we({title:b("confirm.show_reblogs.title",[l.account.acct]),confirm:b("confirm.show_reblogs.confirm"),cancel:b("confirm.show_reblogs.cancel")})!=="confirm")return;const e=!s.value?.showingReblogs;s.value=await $.value.v1.accounts.follow(l.account.id,{reblogs:e})}async function N(){r("addNote")}async function j(){if(!s.value.note||s.value.note.length===0)return;const e=await $.value.v1.accounts.createNote(l.account.id,{comment:""});s.value.note=e.note,r("removeNote")}return(e,a)=>{const m=Ne,y=E,U=Ke;return o(),d(U,{"eager-mount":e.command},{popper:p(()=>[i(y,{to:e.account.url,external:"",target:"_blank"},{default:p(()=>[i(m,{text:e.$t("menu.open_in_original_site"),icon:"i-ri:arrow-right-up-line",command:e.command},null,8,["text","command"])]),_:1},8,["to"]),n(f)?(o(),d(m,{key:0,text:`Share @${e.account.acct}`,icon:"i-ri:share-line",command:e.command,onClick:a[0]||(a[0]=t=>C())},null,8,["text","command"])):w("",!0),("currentUser"in e?e.currentUser:n(he))?(o(),g(I,{key:1},[n(h)?(o(),g(I,{key:1},[i(y,{to:"/pinned"},{default:p(()=>[i(m,{text:e.$t("account.pinned"),icon:"i-ri:pushpin-line",command:e.command},null,8,["text","command"])]),_:1}),i(y,{to:"/favourites"},{default:p(()=>[i(m,{text:e.$t("account.favourites"),icon:n(v)?"i-ri:star-line":"i-ri:heart-3-line",command:e.command},null,8,["text","icon","command"])]),_:1}),i(y,{to:"/mutes"},{default:p(()=>[i(m,{text:e.$t("account.muted_users"),icon:"i-ri:volume-mute-line",command:e.command},null,8,["text","command"])]),_:1}),i(y,{to:"/blocks"},{default:p(()=>[i(m,{text:e.$t("account.blocked_users"),icon:"i-ri:forbid-2-line",command:e.command},null,8,["text","command"])]),_:1}),i(y,{to:"/domain_blocks"},{default:p(()=>[i(m,{text:e.$t("account.blocked_domains"),icon:"i-ri:shut-down-line",command:e.command},null,8,["text","command"])]),_:1})],64)):(o(),g(I,{key:0},[i(m,{text:e.$t("menu.mention_account",[`@${e.account.acct}`]),icon:"i-ri:at-line",command:e.command,onClick:a[1]||(a[1]=t=>("mentionUser"in e?e.mentionUser:n(be))(e.account))},null,8,["text","command"]),i(m,{text:e.$t("menu.direct_message_account",[`@${e.account.acct}`]),icon:"i-ri:message-3-line",command:e.command,onClick:a[2]||(a[2]=t=>("directMessageUser"in e?e.directMessageUser:n($e))(e.account))},null,8,["text","command"]),n(s)?.showingReblogs?(o(),d(m,{key:1,text:e.$t("menu.hide_reblogs",[`@${e.account.acct}`]),icon:"i-ri:repeat-line",command:e.command,onClick:a[4]||(a[4]=t=>R())},null,8,["text","command"])):(o(),d(m,{key:0,icon:"i-ri:repeat-line",text:e.$t("menu.show_reblogs",[`@${e.account.acct}`]),command:e.command,onClick:a[3]||(a[3]=t=>R())},null,8,["text","command"])),!n(s)?.note||n(s)?.note?.length===0?(o(),d(m,{key:2,text:e.$t("menu.add_personal_note",[`@${e.account.acct}`]),icon:"i-ri-edit-2-line",command:e.command,onClick:a[5]||(a[5]=t=>N())},null,8,["text","command"])):(o(),d(m,{key:3,text:e.$t("menu.remove_personal_note",[`@${e.account.acct}`]),icon:"i-ri-edit-2-line",command:e.command,onClick:a[6]||(a[6]=t=>j())},null,8,["text","command"])),n(s)?.muting?(o(),d(m,{key:5,text:e.$t("menu.unmute_account",[`@${e.account.acct}`]),icon:"i-ri:volume-up-fill",command:e.command,onClick:a[8]||(a[8]=t=>n(Z)(n(s),e.account))},null,8,["text","command"])):(o(),d(m,{key:4,text:e.$t("menu.mute_account",[`@${e.account.acct}`]),icon:"i-ri:volume-mute-line",command:e.command,onClick:a[7]||(a[7]=t=>n(Z)(n(s),e.account))},null,8,["text","command"])),n(s)?.blocking?(o(),d(m,{key:7,text:e.$t("menu.unblock_account",[`@${e.account.acct}`]),icon:"i-ri:checkbox-circle-line",command:e.command,onClick:a[10]||(a[10]=t=>n(Q)(n(s),e.account))},null,8,["text","command"])):(o(),d(m,{key:6,text:e.$t("menu.block_account",[`@${e.account.acct}`]),icon:"i-ri:forbid-2-line",command:e.command,onClick:a[9]||(a[9]=t=>n(Q)(n(s),e.account))},null,8,["text","command"])),("getServerName"in e?e.getServerName:n(V))(e.account)!==("currentServer"in e?e.currentServer:n(ye))?(o(),g(I,{key:8},[n(s)?.domainBlocking?(o(),d(m,{key:1,text:e.$t("menu.unblock_domain",[("getServerName"in e?e.getServerName:n(V))(e.account)]),icon:"i-ri:restart-line",command:e.command,onClick:a[12]||(a[12]=t=>n(X)(n(s),e.account))},null,8,["text","command"])):(o(),d(m,{key:0,text:e.$t("menu.block_domain",[("getServerName"in e?e.getServerName:n(V))(e.account)]),icon:"i-ri:shut-down-line",command:e.command,onClick:a[11]||(a[11]=t=>n(X)(n(s),e.account))},null,8,["text","command"]))],64)):w("",!0),i(m,{text:e.$t("menu.report_account",[`@${e.account.acct}`]),icon:"i-ri:flag-2-line",command:e.command,onClick:a[13]||(a[13]=t=>("openReportDialog"in e?e.openReportDialog:n(ke))(e.account))},null,8,["text","command"])],64))],64)):w("",!0)]),default:p(()=>[rn]),_:1},8,["eager-mount"])}}}),dn={p4:"","hover:bg-active":"",block:"",w:"100%",flex:"","justify-between":"","items-center":"","gap-4":""},pn=["onClick"],vn=L({__name:"Lists",props:{userId:{}},async setup(l){let r,s;const h=W(),b=M(h,"client"),u=b.value.v1.lists.list(),$=F(([r,s]=te(()=>b.value.v1.accounts.listLists(l.userId)),r=await r,s(),r).map(f=>f.id));function v(f){return $.value.indexOf(f)}async function S(f){try{v(f)===-1?(await b.value.v1.lists.addAccount(f,{accountIds:[l.userId]}),$.value.push(f)):(await b.value.v1.lists.removeAccount(f,{accountIds:[l.userId]}),$.value=$.value.filter(R=>R!==f))}catch(C){console.error(C)}}return(f,C)=>{const R=oe,N=en;return o(),d(N,{"end-message":!1,paginator:n(u)},{default:p(({item:j})=>[c("div",dn,[c("p",null,A(j.title),1),i(R,{content:v(j.id)===-1?f.$t("list.add_account"):f.$t("list.remove_account"),hover:v(j.id)===-1?"text-green":"text-red"},{default:p(()=>[c("button",{"text-sm":"",p2:"","border-1":"","transition-colors":"","border-dark":"","btn-action-icon":"",onClick:()=>S(j.id)},[c("span",{class:D(v(j.id)===-1?"i-ri:user-add-line":"i-ri:user-unfollow-line")},null,2)],8,pn)]),_:2},1032,["content","hover"])])]),_:1},8,["paginator"])}}}),fn={flex:"","flex-col":""},gn=["src","alt"],_n={p4:"","mt--18":"",flex:"","flex-col":"","gap-4":""},hn={relative:""},bn={flex:"","justify-between":""},$n={"inset-ie-0":"",flex:"~ wrap row-reverse","gap-2":"","items-center":"",pt18:"","justify-start":""},yn={"inset-ie-0":"",flex:"","gap-2":"","items-center":""},kn=["aria-pressed","aria-label"],wn={key:0,"i-ri:notification-4-fill":"",block:"","text-current":""},Nn={key:1,"i-ri-notification-4-line":"",block:"","text-current":""},An=["aria-label"],Cn=c("span",{"i-ri:play-list-add-fill":"",block:"","text-current":""},null,-1),Rn=[Cn],jn={flex:"~ col gap1",pt2:""},Sn={flex:"",gap2:"","items-center":"","flex-wrap":""},Dn={key:0,"space-y-2":"","pb-4":"",block:"",border:"b base"},In={flex:"","flex-row":"","space-x-2":"","flex-v-center":""},Un=c("div",{"i-ri-edit-2-line":""},null,-1),Bn={"font-medium":""},Mn={"position-relative":""},Fn={key:1,"max-h-100":"","overflow-y-auto":""},Ln={key:2,flex:"~ col wrap gap1"},Pn={mt:"0.5","text-secondary":"",uppercase:"","text-xs":"","font-bold":""},Hn=c("span",{"text-secondary":"","text-xs":"","font-bold":""},"|",-1),Tn={key:3,flex:"~ wrap gap-2"},Vn=["title"],x=2e3,xn=L({__name:"AccountHeader",props:{account:{},command:{type:Boolean}},setup(l){const r=W(),s=M(r,"client"),{t:h}=O(),b=Ae(()=>l.account.createdAt,{month:"long",day:"numeric",year:"numeric"}),u=q(l.account),$=F([]),v=F([]),S=F(!1),f=z(()=>!l.account.header.endsWith("/original/missing.png"));function C(t){return t==="Joined"?h("account.joined"):t}function R(){return u.value?.notifying?h("account.notifications_on_post_disable",{username:`@${l.account.username}`}):h("account.notifications_on_post_enable",{username:`@${l.account.username}`})}function N(){K([{id:`${l.account.acct}:header`,type:"image",previewUrl:l.account.header,description:h("account.profile_description",[l.account.username])}])}function j(){K([{id:`${l.account.acct}:avatar`,type:"image",previewUrl:l.account.avatar,description:h("account.avatar_description",[l.account.username])}])}async function e(){u.value.notifying=!u.value?.notifying;try{const t=await s.value.v1.accounts.follow(l.account.id,{notify:u.value?.notifying});Object.assign(u.value,t)}catch{u.value.notifying=!u.value?.notifying}}Ce(()=>{const t=[],_=[];l.account.fields?.forEach(B=>{ee(B.name)?_.push(B):t.push(B)}),_.push({name:"Joined",value:b.value}),$.value=t,v.value=_});const a=F(u.value?.note??"");Re(u,(t,_)=>{!_&&t&&(a.value=t.note??"")});async function m(t){if(!t.target||!("value"in t.target)||!u.value)return;const _=t.target?.value;if(u.value.note?.trim()===_.trim())return;const B=await s.value.v1.accounts.createNote(l.account.id,{comment:_});u.value.note=B.note,a.value=u.value.note??""}const y=ne(()=>l.account),U=z(()=>!!u.value?.notifying);return(t,_)=>{const B=Be,J=E,ce=Me,ie=mn,T=oe,se=vn,le=je("VDropdown"),ue=Fe,re=Le,me=Pe,de=He,pe=Te,P=ae,ve=Ve;return o(),g("div",fn,[(o(),d(Se(f.value?"button":"div"),{border:"b base","z-1":"",onClick:_[0]||(_[0]=k=>f.value?N():void 0)},{default:p(()=>[c("img",{"h-50":"",height:"200","w-full":"","object-cover":"",src:t.account.header,alt:n(h)("account.profile_description",[t.account.username])},null,8,gn)]),_:1})),c("div",_n,[c("div",hn,[c("div",bn,[c("button",{"shrink-0":"",class:D({"rounded-full":!n(y),squircle:n(y)}),p1:"","bg-base":"","border-bg-base":"","z-2":"",onClick:j},[i(B,{square:n(y),account:t.account,"hover:opacity-90":"","transition-opacity":"","w-28":"","h-28":""},null,8,["square","account"])],2),c("div",$n,[n(y)?(o(),d(J,{key:0,to:"/settings/profile/appearance","gap-1":"","items-center":"",border:"1","rounded-full":"",flex:"~ gap2 center","font-500":"","min-w-30":"","h-fit":"",px3:"",py1:"",hover:"border-primary text-primary bg-active"},{default:p(()=>[H(A(t.$t("settings.profile.appearance.title")),1)]),_:1})):w("",!0),i(ce,{account:t.account,command:t.command},null,8,["account","command"]),c("span",yn,[i(ie,{account:t.account,command:t.command,onAddNote:_[1]||(_[1]=k=>S.value=!0),onRemoveNote:_[2]||(_[2]=()=>{S.value=!1,a.value=""})},null,8,["account","command"]),!n(y)&&n(u)?.following?(o(),d(T,{key:0,content:R()},{default:p(()=>[c("button",{"aria-pressed":U.value,"aria-label":n(h)("account.notifications_on_post_enable",{username:`@${t.account.username}`}),"rounded-full":"","text-sm":"",p2:"","border-1":"","transition-colors":"",class:D(U.value?"text-primary border-primary hover:bg-red/20 hover:text-red hover:border-red":"border-base hover:text-primary"),onClick:e},[U.value?(o(),g("span",wn)):(o(),g("span",Nn))],10,kn)]),_:1},8,["content"])):w("",!0),i(T,{content:t.$t("list.modify_account")},{default:p(()=>[!n(y)&&n(u)?.following?(o(),d(le,{key:0},{popper:p(()=>[i(se,{"user-id":t.account.id},null,8,["user-id"])]),default:p(()=>[c("button",{"aria-label":t.$t("list.modify_account"),"rounded-full":"","text-sm":"",p2:"","border-1":"","transition-colors":"","border-base":"","hover:text-primary":""},Rn,8,An)]),_:1})):w("",!0)]),_:1},8,["content"])])])]),c("div",jn,[c("div",Sn,[i(ue,{account:t.account,"font-bold":"","sm:text-2xl":"","text-xl":""},null,8,["account"]),t.account.roles?.length?(o(),d(re,{key:0,account:t.account},null,8,["account"])):w("",!0),t.account.locked?(o(),d(me,{key:1,"show-label":""})):w("",!0),t.account.bot?(o(),d(de,{key:2,"show-label":""})):w("",!0)]),i(pe,{account:t.account,"overflow-unset":"","line-clamp-unset":""},null,8,["account"])])]),n(S)||n(u)?.note&&n(u).note.length>0?(o(),g("label",Dn,[c("div",In,[Un,c("p",Bn,A(t.$t("account.profile_personal_note")),1),c("p",{"text-secondary":"","text-sm":"",class:D({"text-orange":n(a).length>x-100})},A(n(a).length)+" / "+A(x),3)]),c("div",Mn,[c("div",{"input-base":"","min-h-10ex":"","whitespace-pre-wrap":"","opacity-0":"",class:D({"trailing-newline":n(a).endsWith(`
`)})},A(n(a)),3),De(c("textarea",{"onUpdate:modelValue":_[3]||(_[3]=k=>Ue(a)?a.value=k:null),"input-base":"","position-absolute":"",style:{height:"100%"},"top-0":"","resize-none":"",maxlength:x,onChange:m},null,544),[[Ie,n(a)]])])])):w("",!0),t.account.note?(o(),g("div",Fn,[i(P,{"text-4":"","text-base":"",content:t.account.note,emojis:t.account.emojis},null,8,["content","emojis"])])):w("",!0),n($).length?(o(),g("div",Ln,[(o(!0),g(I,null,G(n($),k=>(o(),g("div",{key:k.name,flex:"~ gap-1","items-center":""},[c("div",Pn,[i(P,{content:k.name,emojis:t.account.emojis},null,8,["content","emojis"])]),Hn,i(P,{content:k.value,emojis:t.account.emojis},null,8,["content","emojis"])]))),128))])):w("",!0),n(v).length?(o(),g("div",Tn,[(o(!0),g(I,null,G(n(v),k=>(o(),g("div",{key:k.name,flex:"~ gap-1",px1:"","items-center":"",class:D(`${k.verifiedAt?"border-1 rounded-full border-dark":""}`)},[i(T,{content:C(k.name)},{default:p(()=>[c("div",{"text-secondary":"",class:D(("getAccountFieldIcon"in t?t.getAccountFieldIcon:n(ee))(k.name)),title:C(k.name)},null,10,Vn)]),_:2},1032,["content"]),i(P,{"text-sm":"",content:k.value,emojis:t.account.emojis},null,8,["content","emojis"])],2))),128))])):w("",!0),i(ve,{account:t.account},null,8,["account"])])])}}});const zn={key:1,"h-30":"",flex:"~ col center gap-2"},En={"text-secondary":""},qn={"text-secondary-light":"","text-sm":""},Xn=L({__name:"index",async setup(l){let r,s;const h=xe().params,b=ze(()=>We(h.account)),{t:u}=O(),$=([r,s]=te(()=>tn(()=>Ye(b.value).catch(()=>null),{immediate:!0,default:()=>Je()},"$NnZymwqz1Y")),r=await r,s(),r),v=M($,"data"),S=M($,"pending"),f=M($,"refresh"),C=z(()=>v.value?q(v.value).value:void 0),R=Ee();return qe(()=>{f.value()}),(N,j)=>{const e=ae,a=un,m=xn,y=Xe,U=nn,t=Oe;return o(),d(t,{back:""},{title:p(()=>[i(e,{"timeline-title-style":"",content:v.value?("getDisplayName"in N?N.getDisplayName:n(Ze))(v.value):n(u)("nav.profile"),"show-emojis":!("getPreferences"in N?N.getPreferences:n(Qe))(n(R),"hideUsernameEmojis"),markdown:!1},null,8,["content","show-emojis"])]),default:p(()=>[S.value?(o(),g(I,{key:0},[],64)):v.value?(o(),g(I,{key:1},[v.value.moved?(o(),d(a,{key:0,account:v.value},null,8,["account"])):w("",!0),i(m,{account:v.value,command:"",border:"b base",class:D({"op-50 grayscale-50":!!v.value.moved})},null,8,["account","class"]),C.value?.blockedBy?(o(),g("div",zn,[c("div",En,A(N.$t("account.profile_unavailable")),1),c("div",qn,A(N.$t("account.blocked_by")),1)])):(o(),d(y,{key:2}))],64)):(o(),d(U,{key:2},{default:p(()=>[H(A(N.$t("error.account_not_found",[`@${n(b)}`])),1)]),_:1}))]),_:1})}}});export{Xn as default};
